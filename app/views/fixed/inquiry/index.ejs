<%- contentFor('script') %>
<script src="/js/print/star/StarWebPrintTrader.js"></script>
<script src="/js/print/star/StarWebPrintBuilder.js"></script>
<script src="/js/print/star/starprint.js"></script>
<script src="/js/print/star/print.js"></script>
<script src="/js/inquiry/index.js"></script>
<%- contentFor('body') %>
<%- include('../layouts/inquiry/steps', {step: 1}) %>
<div class="inquiry-confirm">
    <h1 class="page-ttl"><%- __('inquiry.confirm.page_ttl') %></h1>
    <p class="read"><%- __('inquiry.confirm.read') %></p>

    <div class="table-layout center mb-large">
        <dl>
            <dt><%- __('common.purchase_number') %></dt>
            <dd><%= login.reserveNum %></dd>
        </dl>
        <dl>
            <dt><%- __('common.film_title') %></dt>
            <dd><%= performance.attributes.film.name[__('lang')] %></dd>
        </dl>
        <dl>
            <dt><%- __('common.appreciation_date') %></dt>
            <dd><%= moment(performance.attributes.day).format('YYYY年MM月DD日') %>(<%= __('week[' + moment(performance.attributes.day).format('ddd') + ']') %>) <%= timeFormat(performance.attributes.timeStart) %> - <%= timeFormat(performance.attributes.timeEnd) %></dd>
        </dl>
        <dl>
            <dt><%- __('common.seat') %></dt>
            <dd>
                <% for (let i = 0; i < stateReserve.listTicket.length; i++) { %>
                <% const ticket = stateReserve.listTicket[i] %>
                <p><%= `${ticket.seatNum} ${ticket.ticketName}` %></p>
                <% } %>
            </dd>
        </dl>
    </div>
    <% if (moment(`${performance.attributes.day} ${performance.attributes.timeStart}`).add(10 ,'minutes').unix() < moment().unix()) { %>
    <p class="text-center"><%- __('inquiry.confirm.after') %></p>
    <% } else { %>
    <div class="button middle-button print-button"><a class="center icon-triangle-01" href="/inquiry/complete"><%- __('inquiry.confirm.next') %></a></div>
    <% } %>
</div>
<input type="hidden" name="ticketLength" value="<%= stateReserve.listTicket.length %>">
<input type="hidden" name="theaterCode" value="<%= login.theaterCode %>">
<input type="hidden" name="reserveNum" value="<%= login.reserveNum %>">
<input type="hidden" name="telephone" value="<%= login.telephone %>">
<input type="hidden" name="transactionId" value="<%= purchaseModel.transaction.id %>">
<input type="hidden" name="expire" value="<%= moment(performance.attributes.day).add(10, 'day').format('x') %>">
<%- include('completeContents') %>

<%- contentFor('modals') %>
<%- include('modals/print') %>