<%- contentFor('script') %>
<% if (env === 'development') { %>
<script src="https://unpkg.com/vue"></script>
<% } else { %>
<script src="/js/common/vue.min.js"></script>
<% } %>

<%- contentFor('afterScript') %>
<script src="/js/purchase/performances.js"></script>
<%- contentFor('style') %>
<style>
    .navigation {
        display: none;
    }
</style>
<%- contentFor('prev') %>
/
<%- contentFor('body') %>


<div class="purchase-performances" id="performances">
    <h1 class="page-ttl"><%- __('purchase.performances.page_ttl') %></h1>
    <p class="read"><%- __('purchase.performances.read') %></p>
    <div class="form-layout center mb-middle">
        <dl>
            <dt><%- __('purchase.performances.date') %></dt>
            <dd>
                <select v-model="date">
                    <template v-for="select in selects">
                        <option v-bind:value="select.value">{{select.text}}</option>
                    </template>
                </select>
            </dd>
        </dl>
    </div>

    <div class="sort mb-middle text-center">
        <div><a v-bind:class="{active: (sortType === 'chronological')}" v-on:click="onClickSort('chronological', $event)" href="#"><%- __('purchase.performances.sort.chronological') %></a></div>
        <div><a v-bind:class="{active: (sortType === 'film')}" v-on:click="onClickSort('film', $event)" href="#"><%- __('purchase.performances.sort.film') %></a></div>
    </div>

    <template v-if="error === null">
    <ul v-bind:class="{ active: sortType === 'chronological' }" class="chronological-order">
        <li v-for="order in chronologicalOrder" v-bind:key="order.id" class="button white-button mb-x-small">
            <a v-on:click="onclickPerformance($event, order.id, order.attributes.film.id)" class="icon-triangle-02">
            <dl>
                <dt class="text-left">
                    <div>
                        <div class="mb-x-small"><strong class="large-x-text">{{ order.attributes.time_start | timeFormat }}</strong></div>
                        <div>～{{ order.attributes.time_end | timeFormat }}</div>
                    </div>
                    <div class="small-text text-center">
                        <div v-if="order.attributes.stock_status === 0" class="mb-x-small"><%- __('purchase.performances.status.full') %></div>
                        <div v-else-if="order.attributes.stock_status <= 10" class="mb-x-small"><%- __('purchase.performances.status.few') %></div>
                        <div v-else class="mb-x-small"><%- __('purchase.performances.status.many') %></div>
                        <div v-if="order.attributes.stock_status === 0" class="status"><img src="/images/fixed/status_03.svg"></div>
                        <div v-else-if="order.attributes.stock_status <= 10" class="status"><img src="/images/fixed/status_02.svg"></div>
                        <div v-else class="status"><img src="/images/fixed/status_01.svg"></div>
                    </div>
                </dt>
                <dd class="text-left">
                    <div class="screen-name mb-x-small small-text d-ib">{{ order.attributes.screen.name.ja }}</div>
                    <div class="small-text mb-x-small d-ib">{{ order.attributes.film.minutes }}分</div>
                    <p><strong>{{ order.attributes.film.name.ja }}</strong></p>
                </dd>
            </dl>
            </a>
        </li>
    </ul>
    
    <ul v-bind:class="{ active: sortType === 'film' }" class="film-order">
        <li v-for="order in filmOrder" v-bind:key="order.id" class="performance mb-x-small">
            <dl>
                <dt>
                    <div class="mb-x-small"><strong>{{ order.films[0].attributes.film.name.ja }}</strong></div>
                    <div class="small-text">{{ order.films[0].attributes.film.minutes }}分</div>
                </dt>
                <dd>
                    <ul>
                        <li v-for="film in order.films" v-bind:key="film.id" class="button white-button">
                            <a v-on:click="onclickPerformance($event, film.id, film.attributes.film.id)" class="icon-triangle-02">
                                <dl>
                                    <dt>
                                        <strong>{{ film.attributes.time_start | timeFormat }}</strong><span class="small-text">～{{ film.attributes.time_end | timeFormat }}</span>
                                    </dt>
                                    <dd class="small-x-text text-left">
                                        <div class="screen-name mb-x-small">{{ film.attributes.screen.name.ja }}</div>
                                        <div v-if="film.attributes.stock_status === 0"><%- __('purchase.performances.status.full') %></div>
                                        <div v-else-if="film.attributes.stock_status <= 10"><%- __('purchase.performances.status.few') %></div>
                                        <div v-else ><%- __('purchase.performances.status.many') %></div>
                                        <div v-if="film.attributes.stock_status === 0" class="status"><img src="/images/fixed/status_03.svg"></div>
                                        <div v-else-if="film.attributes.stock_status <= 10" class="status"><img src="/images/fixed/status_02.svg"></div>
                                        <div v-else class="status"><img src="/images/fixed/status_01.svg"></div>
                                    </dd>
                                </dl>
                            </a>
                        </li>
                    </ul>
                </dd>
            </dl>
        </li>
    </ul>
    </template>
    <p v-if="error !== null" class="text-center">{{ error }}</p>

    <div class="inquiry text-center">
        <div class="mb-middle"><%- __('purchase.performances.inquiry.read') %></div>
        <div class="button center inquiry-button">
            <a class="icon-ticketing-white" href="#" v-on:click="onclickInquiry($event)"><%- __('purchase.performances.inquiry.button') %></a>
        </div>
    </div>
</div>

