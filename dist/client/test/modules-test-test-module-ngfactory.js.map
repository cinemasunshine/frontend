{"version":3,"sources":["./app/modules/test/pages/test-screen/test-screen.component.html","./app/modules/test/pages/test-screen/test-screen.component.ts","./app/modules/test/test-routing.module.ts","./app/modules/test/test.module.ts"],"names":[],"mappings":"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","file":"modules-test-test-module-ngfactory.js","sourcesContent":["<div class=\"mb-middle\">\n    <app-screen *ngIf=\"screenData\" [screenConfig]=\"screenData.screenConfig\" [screen]=\"screenData.screen\" [status]=\"screenData.status\"></app-screen>\n</div>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport * as COA from '@motionpicture/coa-service';\nimport { IScreenConfig } from '../../../../models';\nimport { SasakiService } from '../../../../services';\n\n@Component({\n    selector: 'app-test-screen',\n    templateUrl: './test-screen.component.html',\n    styleUrls: ['./test-screen.component.scss']\n})\nexport class TestScreenComponent implements OnInit {\n    public isLoading: boolean;\n    public screenData: {\n        screenConfig: IScreenConfig;\n        status: COA.services.reserve.IStateReserveSeatResult;\n    };\n    constructor(\n        private activatedRoute: ActivatedRoute,\n        private http: HttpClient,\n        private sasaki: SasakiService\n    ) { }\n\n    public ngOnInit() {\n        this.isLoading = true;\n        this.activatedRoute.params.subscribe(async (params) => {\n            this.screenData = await this.getData({\n                theaterCode: params.theaterCode,\n                dateJouei: '',\n                titleCode: '',\n                titleBranchNum: '',\n                timeBegin: '',\n                screenCode: params.screenCode\n            });\n\n            this.isLoading = false;\n        });\n    }\n\n    /**\n     * データ取得\n     * @method getData\n     */\n    public async getData(params: {\n        theaterCode: string;\n        dateJouei: string;\n        titleCode: string;\n        titleBranchNum: string;\n        timeBegin: string;\n        screenCode: string;\n    }): Promise<{\n        screenConfig: IScreenConfig,\n        status: COA.services.reserve.IStateReserveSeatResult,\n        screen?: COA.services.master.IScreenResult\n    }> {\n        const DIGITS = { '02': -2, '03': -3 };\n        const theaterCode = `00${params.theaterCode}`.slice(DIGITS['02']);\n        const screenCode = `000${params.screenCode}`.slice(DIGITS['03']);\n        const screenConfig = await this.http.get<IScreenConfig>(`/json/theater/${theaterCode}/${screenCode}.json`).toPromise();\n        const setting = await this.http.get<IScreenConfig>('/json/theater/setting.json').toPromise();\n\n        const status = (<any>{ listSeat: [] });\n        let screen;\n        try {\n            const screens = await this.sasaki.getScreens({\n                theaterCode: params.theaterCode\n            });\n            screen = screens.find(s => s.screenCode === params.screenCode);\n        } catch (error) {\n            console.error(error);\n        }\n        // スクリーンデータをマージ\n        return {\n            screenConfig: Object.assign(setting, screenConfig),\n            status,\n            screen\n        };\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { TestScreenComponent } from './pages/test-screen/test-screen.component';\n\n\nconst routes: Routes = [\n  { path: ':theaterCode/:screenCode/screen', component: TestScreenComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TestRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { TestScreenComponent } from './pages/test-screen/test-screen.component';\nimport { TestRoutingModule } from './test-routing.module';\n\n\n@NgModule({\n  declarations: [\n    TestScreenComponent\n  ],\n  imports: [\n    CommonModule,\n    TestRoutingModule,\n    SharedModule,\n  ]\n})\nexport class TestModule { }\n"],"sourceRoot":"webpack:///"}