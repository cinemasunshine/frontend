{"version":3,"sources":["./app/modules/purchase/components/pages/purchase-base/purchase-base.component.html","./app/modules/purchase/components/pages/purchase-base/purchase-base.component.ts","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.html","./app/modules/purchase/components/pages/purchase-complete/purchase-complete.component.ts","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.html","./app/modules/purchase/components/pages/purchase-confirm/purchase-confirm.component.ts","./app/modules/purchase/components/pages/purchase-input/purchase-input.component.html","./app/modules/purchase/components/pages/purchase-input/purchase-input.component.ts","./app/modules/purchase/components/pages/purchase-mvtk-confirm/purchase-mvtk-confirm.component.html","./app/modules/purchase/components/pages/purchase-mvtk-confirm/purchase-mvtk-confirm.component.ts","./app/modules/purchase/components/pages/purchase-mvtk-input/purchase-mvtk-input.component.html","./app/modules/purchase/components/pages/purchase-mvtk-input/purchase-mvtk-input.component.ts","./app/modules/purchase/components/pages/purchase-overlap/purchase-overlap.component.html","./app/modules/purchase/components/pages/purchase-overlap/purchase-overlap.component.ts","./app/modules/purchase/components/pages/purchase-point/purchase-point.component.html","./app/modules/purchase/components/pages/purchase-point/purchase-point.component.ts","./app/modules/purchase/components/pages/purchase-schedule/purchase-schedule.component.html","./app/modules/purchase/components/pages/purchase-schedule/purchase-schedule.component.ts","./app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.html","./app/modules/purchase/components/pages/purchase-seat/purchase-seat.component.ts","./app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.html","./app/modules/purchase/components/pages/purchase-ticket/purchase-ticket.component.ts","./app/modules/purchase/components/pages/purchase-transaction/purchase-transaction.component.html","./app/modules/purchase/components/pages/purchase-transaction/purchase-transaction.component.ts","./app/modules/purchase/components/parts/purchase-film-order-performance/purchase-film-order-performance.component.html","./app/modules/purchase/components/parts/purchase-film-order-performance/purchase-film-order-performance.component.ts","./app/modules/purchase/components/parts/purchase-film-order/purchase-film-order.component.html","./app/modules/purchase/components/parts/purchase-film-order/purchase-film-order.component.ts","./app/modules/purchase/components/parts/purchase-note/purchase-note.component.html","./app/modules/purchase/components/parts/purchase-note/purchase-note.component.ts","./app/modules/purchase/components/parts/purchase-step/purchase-step.component.html","./app/modules/purchase/components/parts/purchase-step/purchase-step.component.ts","./app/modules/purchase/components/parts/purchase-term/purchase-term.component.html","./app/modules/purchase/components/parts/purchase-term/purchase-term.component.ts","./app/modules/purchase/components/parts/seat-info/seat-info.component.html","./app/modules/purchase/components/parts/seat-info/seat-info.component.ts","./app/modules/purchase/purchase-routing.module.ts","./app/modules/purchase/purchase.module.ts","./app/modules/shared/components/parts/buttons/buttons.component.html","./app/modules/shared/components/parts/next-button/next-button.component.html"],"names":[],"mappings":"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","file":"modules-purchase-purchase-module-ngfactory.js","sourcesContent":["<app-header>\n    <app-purchase-step></app-purchase-step>\n</app-header>\n<router-outlet></router-outlet>\n<app-footer></app-footer>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-purchase-base',\n    templateUrl: './purchase-base.component.html',\n    styleUrls: ['./purchase-base.component.scss']\n})\nexport class PurchaseBaseComponent implements OnInit {\n\n    constructor() { }\n\n    public ngOnInit() {\n    }\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">購入完了</h1>\n    <p class=\"read\">ご購入ありがとうございました。\n        <br>購入者情報入力画面で入力していただいたメールアドレス宛に購入完了メールを送信しました。\n        <br>ご入場方法に関しましてはページ下部をご確認ください。\n        <br>※購入完了メールの送信に時間がかかる事がありますのでご注意ください。</p>\n\n    <ul class=\"box radius bg-light-gray info mb-large form-layout\">\n        <li class=\"purchase-number\">\n            <dl>\n                <dt>予約番号</dt>\n                <dd>\n                    <strong class=\"red-text large-x-text\">{{ data.order.confirmationNumber }}</strong>\n                    <p class=\"small-x-text\">※チケットの発行等に必要な番号となりますので必ず忘れないようにしてください。</p>\n                </dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>劇場 / スクリーン</dt>\n                <dd>{{ getTheaterName() }} / {{ getScreenName() }}</dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>作品名</dt>\n                <dd>{{ getTitle() }}</dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>鑑賞日時</dt>\n                <dd>\n                    {{ getAppreciationDate() }} {{ getStartDate() }} - {{ getEndDate() }}\n                </dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>座席</dt>\n                <dd>\n                    <p *ngFor=\"let offer of data.order.acceptedOffers\">\n                        {{ offer.itemOffered.reservedTicket.coaTicketInfo.seatNum }} {{ offer.itemOffered.reservedTicket.coaTicketInfo.ticketName\n                        }} ￥{{ getOrderTicketPrice(offer) }}\n                    </p>\n                </dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>ご利用金額</dt>\n                <dd>￥{{ data.order.price }}</dd>\n            </dl>\n        </li>\n        <li>\n            <dl>\n                <dt>メールアドレス</dt>\n                <dd>{{ data.order.customer.email }}</dd>\n            </dl>\n        </li>\n        <li *ngIf=\"user.isMember()\">\n            <dl>\n                <dt>獲得ポイント</dt>\n                <dd>\n                    <strong class=\"red-text\">{{ data.incentive }}ポイント</strong>\n                </dd>\n            </dl>\n        </li>\n    </ul>\n\n    <div class=\"ticket-app-hide\">\n        <div class=\"mb-x-large\">\n            <p class=\"mb-middle small-x-text\">\n                <strong>&lt;購入完了メールが届かない場合のご確認事項&gt;</strong>\n                <br>購入完了後、購入完了メールが届かない場合は下記2点をご確認ください。\n                <br>また、購入完了メールは自動送信のため再送信は致しかねます。\n                <br>購入できているかのご確認は「予約番号」をお控えのうえ\n                <a class=\"inquiry-login-link\"\n                    [href]=\"environment.FRONTEND_ENDPOINT + '/inquiry/login?theater=' + data.seller.location?.branchCode + '&reserve=' + data.order.confirmationNumber\"\n                    target=\"_blank\">チケット照会ページ</a>よりご確認ください。\n                <br>・ご入力いただいたメールアドレスに不備があった場合やメールの着信を拒否されている場合は購入完了メールが受け取れない場合があります。\n                <br>・プロバイダのメール設定、携帯キャリア会社のメール設定のフィルタリング機能を有効にしている方は「削除フォルダ」または「迷惑メールフォルダ」をご確認ください。</p>\n            <div class=\"button dark-blue-button print-button center-button not-print\">\n                <a class=\"icon-print-white\" (click)=\"print()\">印刷する</a>\n            </div>\n        </div>\n\n        <div class=\"not-print\">\n            <h2 class=\"page-ttl\">入場方法</h2>\n\n            <ul class=\"entry-method\">\n                <li>\n                    <dl class=\"box radius bg-light-gray\">\n                        <dt class=\"mb-x-small text-center\">\n                            <strong>QRコードでスマート入場</strong>\n                        </dt>\n                        <dd>\n                            <p class=\"mb-small\">当日チケット発券不要！\n                                <br>スマートフォンで入場用QRコードを提示するだけでスムーズに入場！\n                                <br>入場用QRコードの確認は下記「チケット情報確認」ボタンを押してください。</p>\n                            <div class=\"image mb-x-small bg-white\">\n                                <img src=\"/assets/images/purchase/complete/qr.svg\" alt=\"\">\n                            </div>\n                            <div class=\"button blue-button inquiry-button mb-small center-button\">\n                                <a class=\"icon-new-tab-white\"\n                                    [href]=\"environment.FRONTEND_ENDPOINT + '/inquiry/login?theater=' + data.seller.location?.branchCode + '&reserve=' + data.order.confirmationNumber\"\n                                    target=\"_blank\">チケット情報確認</a>\n                            </div>\n                            <p>スマートフォンをお持ちでない方は当日チケット発券/入場も可能です。\n                                <br>発券方法は\n                                <a class=\"icon-new-tab-blue\" href=\"{{ environment.FRONTEND_ENDPOINT }}/method/ticketing\"\n                                    target=\"_blank\">こちら</a>\n                            </p>\n                        </dd>\n                    </dl>\n                </li>\n            </ul>\n\n            <div class=\"button-area\">\n                <div class=\"prev-link\">\n                    <a href=\"{{ environment.PORTAL_SITE_URL }}\">\n                        <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"ticket-app-show\">\n        <dl class=\"box radius bg-light-gray mb-middle\">\n            <dt class=\"mb-small text-center\">\n                <strong>チケットホルダーでスマート入場</strong>\n            </dt>\n            <dd>\n                <div class=\"image mb-x-small bg-white\">\n                    <img src=\"/assets/images/purchase/complete/qr.svg\" alt=\"\">\n                </div>\n                <p>購入したチケットはチケットホルダーに登録されます。鑑賞当日はチケットホルダー内のQRコードを提示する事で、劇場で発券を行わずにスムーズにご入場頂けます。</p>\n            </dd>\n        </dl>\n\n        <div class=\"button blue-button center-button\">\n            <a href=\"{{ environment.APP_SITE_URL }}/#/ticket\">チケットホルダーに戻る</a>\n        </div>\n    </div>\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\nimport * as moment from 'moment';\nimport { environment } from '../../../../../../environments/environment';\nimport { getOrderTicketPrice } from '../../../../../functions';\nimport { ErrorService, SaveType, StorageService, UserService } from '../../../../../services';\nimport { TimeFormatPipe } from '../../../../shared/pipes';\n\n@Component({\n    selector: 'app-purchase-complete',\n    templateUrl: './purchase-complete.component.html',\n    styleUrls: ['./purchase-complete.component.scss']\n})\nexport class PurchaseCompleteComponent implements OnInit {\n    public data: {\n        order: factory.order.IOrder;\n        transaction: factory.transaction.placeOrder.ITransaction;\n        seller: factory.seller.IOrganization<factory.seller.IAttributes<factory.organizationType>>;\n    };\n    public environment = environment;\n    public getOrderTicketPrice = getOrderTicketPrice;\n\n    constructor(\n        private storage: StorageService,\n        private error: ErrorService,\n        public user: UserService\n    ) { }\n\n    public ngOnInit() {\n        window.scrollTo(0, 0);\n        this.data = this.storage.load('complete', SaveType.Session);\n        if (this.data === null) {\n            this.error.redirect(new Error('complete data is null'));\n        }\n    }\n\n    /**\n     * 印刷\n     * @method print\n     */\n    public print() {\n        print();\n    }\n\n    /**\n     * 劇場名取得\n     * @method getTheaterName\n     * @returns {string}\n     */\n    public getTheaterName() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\n            return '';\n        }\n\n        return itemOffered.reservationFor.superEvent.location.name.ja;\n    }\n\n    /**\n     * スクリーン名取得\n     * @method getScreenName\n     * @returns {string}\n     */\n    public getScreenName() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\n            return '';\n        }\n\n        return itemOffered.reservationFor.location.name.ja;\n    }\n\n    /**\n     * 作品名取得\n     * @method getTitle\n     * @returns {string}\n     */\n    public getTitle() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\n            return '';\n        }\n\n        return itemOffered.reservationFor.name.ja;\n    }\n\n    /**\n     * 鑑賞日取得\n     * @method getAppreciationDate\n     * @returns {string}\n     */\n    public getAppreciationDate() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation\n            || itemOffered.reservationFor.coaInfo === undefined) {\n            return '';\n        }\n        moment.locale('ja');\n\n        return moment(itemOffered.reservationFor.coaInfo.dateJouei).format('YYYY年MM月DD日(ddd)');\n    }\n\n    /**\n     * 上映開始時間取得\n     * @method getStartDate\n     * @returns {string}\n     */\n    public getStartDate() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation\n            || itemOffered.reservationFor.coaInfo === undefined) {\n            return '';\n        }\n        const timeFormat = new TimeFormatPipe();\n\n        return timeFormat.transform(\n            itemOffered.reservationFor.startDate,\n            itemOffered.reservationFor.coaInfo.dateJouei\n        );\n    }\n\n    /**\n     * 上映終了取得\n     * @method getEndDate\n     * @returns {string}\n     */\n    public getEndDate() {\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation\n            || itemOffered.reservationFor.coaInfo === undefined) {\n            return '';\n        }\n        const timeFormat = new TimeFormatPipe();\n\n        return timeFormat.transform(\n            itemOffered.reservationFor.endDate,\n            itemOffered.reservationFor.coaInfo.dateJouei\n        );\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">購入内容確認</h1>\n    <p class=\"read\">\n        <strong class=\"large-text red-text\">まだ購入は完了していません。</strong>\n        <br>ご購入内容をご確認頂き「購入完了」ボタンを押して購入を確定してください。</p>\n\n    <div class=\"form-layout\">\n        <h2 class=\"section-ttl\">\n            作品情報\n            <div class=\"right ticket-app-hide\">\n                <div class=\"button light-gray-button change-button\">\n                    <a href=\"{{ purchase.data.seller?.url }}\">変更</a>\n                </div>\n            </div>\n            <div class=\"right ticket-app-show\">\n                <div class=\"button light-gray-button change-button\">\n                    <a href=\"{{ environment.APP_SITE_URL }}/#/purchase\">変更</a>\n                </div>\n            </div>\n        </h2>\n        <ul class=\"box radius bg-light-gray mb-large\">\n            <li>\n                <dl>\n                    <dt>劇場 / スクリーン</dt>\n                    <dd>{{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>作品名</dt>\n                    <dd>{{ purchase.getTitle() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>鑑賞日時</dt>\n                    <dd>\n                        <div class=\"mb-xx-small\">\n                            <strong class=\"red-text\">\n                                {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{ purchase.getEndDate() }}\n                            </strong>\n                        </div>\n                        <p class=\"small-x-text red-text\">※鑑賞日時を必ずご確認ください。</p>\n                    </dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>座席</dt>\n                    <dd>\n                        <p *ngFor=\"let offer of purchase.data.seatReservationAuthorization?.object.acceptedOffer\">\n                            {{ offer.seatNumber }} {{ offer.ticketInfo.ticketName }} ￥{{ getTicketPrice(offer) }}\n                        </p>\n                    </dd>\n                </dl>\n            </li>\n            <!-- <li *ngIf=\"user.isMember()\">\n                <dl>\n                    <dt>獲得ポイント</dt>\n                    <dd>\n                        <strong class=\"red-text\">0ポイント</strong>\n                    </dd>\n                </dl>\n            </li> -->\n        </ul>\n\n        <h2 class=\"section-ttl\">\n            購入情報\n            <div class=\"right\">\n                <div class=\"button light-gray-button change-button\">\n                    <a routerLink=\"/purchase/input\">変更</a>\n                </div>\n            </div>\n        </h2>\n        <ul class=\"box radius bg-light-gray mb-large\">\n            <li>\n                <dl>\n                    <dt>お名前（カタカナ）</dt>\n                    <dd>{{ purchase.getCustomerName() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>メールアドレス</dt>\n                    <dd>{{ purchase.data.customerContact?.email }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>電話番号</dt>\n                    <dd>{{ (purchase.data.customerContact?.telephone | libphonenumberFormat) }}</dd>\n                </dl>\n            </li>\n\n            <li *ngIf=\"purchase.getTotalPrice() > 0\">\n                <dl>\n                    <dt>カード番号</dt>\n                    <dd *ngIf=\"purchase.data.gmoTokenObject !== undefined\">{{ purchase.data.gmoTokenObject?.maskedCardNo }}</dd>\n                    <dd *ngIf=\"purchase.data.gmoTokenObject === undefined && user.data.creditCards !== undefined\">{{ user.data.creditCards[0].cardNo }}</dd>\n                </dl>\n            </li>\n\n        </ul>\n\n        <h2 class=\"section-ttl\">注意事項(重要)</h2>\n        <p class=\"mb-small\">下記項目をご確認いただきチェックを入れて「購入完了」ボタンを押してください。</p>\n        \n        <app-purchase-note class=\"mb-middle\" [theaterCode]=\"purchase.data.screeningEvent?.superEvent.location.branchCode.slice(-2)\"></app-purchase-note>\n\n        <form [formGroup]=\"confirmForm\" (ngSubmit)=\"onSubmit()\">\n            <div class=\"mb-x-large text-center\">\n                <input type=\"checkbox\" formControlName=\"notes\" id=\"notes\">\n                <label for=\"notes\">\n                    <strong>上記内容に同意する</strong>\n                </label>\n                <div *ngIf=\"confirmForm.controls['notes'].invalid && (confirmForm.controls['notes'].dirty || confirmForm.controls['notes'].touched)\"\n                    class=\"validation-text\">利用規約に同意してください</div>\n            </div>\n            <app-buttons [disabled]=\"isLoading\" nextLabel=\"購入完了\" prevLabel=\"戻る\" prevLink=\"/purchase/input\"></app-buttons>\n        </form>\n    </div>\n    <app-site-seal></app-site-seal>\n</div>\n\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { environment } from '../../../../../../environments/environment';\nimport { getTicketPrice } from '../../../../../functions';\nimport { ErrorService, PurchaseService, UserService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-confirm',\n    templateUrl: './purchase-confirm.component.html',\n    styleUrls: ['./purchase-confirm.component.scss']\n})\nexport class PurchaseConfirmComponent implements OnInit {\n    public confirmForm: FormGroup;\n    public isLoading: boolean;\n    public environment = environment;\n    public getTicketPrice = getTicketPrice;\n\n    constructor(\n        public purchase: PurchaseService,\n        public user: UserService,\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private error: ErrorService\n    ) { }\n\n    public ngOnInit() {\n        window.scrollTo(0, 0);\n        this.isLoading = false;\n        this.confirmForm = this.formBuilder.group({\n            notes: [false, [Validators.requiredTrue]]\n        });\n    }\n\n    public async onSubmit() {\n        if (this.confirmForm.invalid) {\n            this.confirmForm.controls.notes.markAsDirty();\n\n            return;\n        }\n        this.isLoading = true;\n        if (this.purchase.isExpired()) {\n            this.router.navigate(['/expired']);\n\n            return;\n        }\n        if (this.purchase.getTotalPrice() > 0) {\n            try {\n                // クレジットカード処理\n                await this.purchase.creditCardPaymentProcess();\n            } catch (err) {\n                this.purchase.data.isCreditCardError = true;\n                this.router.navigate(['/purchase/input']);\n                return;\n            }\n        }\n        try {\n            if (this.user.isMember() && this.purchase.isReservePoint()) {\n                // 会員かつポイント使用\n                await this.purchase.pointPaymentProcess();\n            }\n            if (this.user.isMember() && this.purchase.isIncentive()) {\n                // 会員かつポイント未使用\n                await this.purchase.incentiveProcess();\n            }\n            await this.purchase.purchaseRegistrationProcess();\n            this.router.navigate(['/purchase/complete']);\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">購入者情報入力</h1>\n    <p class=\"read\">必須項目を入力し「次へ」ボタンを押してください。</p>\n\n    <form [formGroup]=\"inputForm\" (ngSubmit)=\"onSubmit()\">\n        <h2 class=\"section-ttl\">お名前（カタカナ）\n            <span class=\"text-icon-red small-x-text\">入力必須</span>\n        </h2>\n        <div class=\"box radius bg-light-gray mb-large\">\n            <div class=\"column-02\">\n                <dl>\n                    <dt>セイ</dt>\n                    <dd>\n                        <input\n                            [class.validation]=\"inputForm.controls['familyName'].invalid && inputForm.controls['familyName'].touched\"\n                            type=\"text\" formControlName=\"familyName\" autocomplete=\"family-name\" placeholder=\"(例)シネマ\">\n                        <div\n                            *ngIf=\"inputForm.controls['familyName'].invalid && inputForm.controls['familyName'].touched\">\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.required\" class=\"validation-text\">\n                                セイが未入力です</div>\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.maxlength\" class=\"validation-text\">\n                                セイは{{ inputForm.controls['familyName'].errors.maxlength.requiredLength }}文字以下で入力してください\n                            </div>\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.pattern\" class=\"validation-text\">\n                                セイは全角カタカナで入力してください</div>\n                        </div>\n                    </dd>\n                </dl>\n                <dl>\n                    <dt>メイ</dt>\n                    <dd>\n                        <input\n                            [class.validation]=\"inputForm.controls['givenName'].invalid && inputForm.controls['givenName'].touched\"\n                            type=\"text\" formControlName=\"givenName\" autocomplete=\"given-name\" placeholder=\"(例)タロウ\">\n                        <div *ngIf=\"inputForm.controls['givenName'].invalid && inputForm.controls['givenName'].touched\">\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.required\" class=\"validation-text\">\n                                メイが未入力です</div>\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.maxlength\" class=\"validation-text\">\n                                メイは{{ inputForm.controls['givenName'].errors.maxlength.requiredLength }}文字以下で入力してください\n                            </div>\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.pattern\" class=\"validation-text\">\n                                メイは全角カタカナで入力してください</div>\n                        </div>\n                    </dd>\n                </dl>\n            </div>\n        </div>\n        <h2 class=\"section-ttl\">メールアドレス\n            <span class=\"text-icon-red small-x-text\">入力必須</span>\n        </h2>\n        <div class=\"box radius bg-light-gray mb-large\">\n            <dl>\n                <dd>\n                    <input\n                        [class.validation]=\"inputForm.controls['email'].invalid && inputForm.controls['email'].touched\"\n                        type=\"email\" formControlName=\"email\" autocomplete=\"email\"\n                        placeholder=\"(例)cinema@cinemasunshine.co.jp\">\n                    <div *ngIf=\"inputForm.controls['email'].invalid && inputForm.controls['email'].touched\">\n                        <div *ngIf=\"inputForm.controls['email'].errors.required\" class=\"validation-text\">メールアドレスが未入力です\n                        </div>\n                        <div *ngIf=\"inputForm.controls['email'].errors.maxlength\" class=\"validation-text\">\n                            メールアドレスは{{ inputForm.controls['email'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\n                        <div *ngIf=\"inputForm.controls['email'].errors.email\" class=\"validation-text\">メールアドレスが正しくありません\n                        </div>\n                    </div>\n                </dd>\n            </dl>\n            <dl>\n                <dt>メールアドレス確認</dt>\n                <dd>\n                    <input\n                        [class.validation]=\"(inputForm.controls['emailConfirm'].invalid && inputForm.controls['emailConfirm'].touched) || (inputForm.controls['email'].touched && inputForm.controls['emailConfirm'].touched && (inputForm.controls['email'].value !== inputForm.controls['emailConfirm'].value))\"\n                        type=\"email\" formControlName=\"emailConfirm\" placeholder=\"(例)cinema@cinemasunshine.co.jp\">\n                    <div\n                        *ngIf=\"inputForm.controls['emailConfirm'].invalid && inputForm.controls['emailConfirm'].touched\">\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.required\" class=\"validation-text\">\n                            メールアドレス確認が未入力です</div>\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.maxlength\" class=\"validation-text\">\n                            メールアドレス確認は{{ inputForm.controls['emailConfirm'].errors.maxlength.requiredLength }}文字以下で入力してください\n                        </div>\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.email\" class=\"validation-text\">\n                            メールアドレス確認が正しくありません</div>\n                    </div>\n                    <div *ngIf=\"inputForm.controls['email'].touched && inputForm.controls['emailConfirm'].touched && (inputForm.controls['email'].value !== inputForm.controls['emailConfirm'].value)\"\n                        class=\"validation-text\">\n                        メールアドレス確認が一致しません</div>\n                    <p class=\"small-x-text\">\n                        <strong>【ドメイン指定受信をご利用の場合について】</strong>\n                        <br>※ 携帯電話のドメイン指定受信をされている場合、「@ticket-cinemasunshine.com」を追加設定してください。\n                        <br>※ au(@ezweb.ne.jp)をご利用の場合、上記に加え「なりすまし規制回避リスト」にも「@ticket-cinemasunshine.com」の追加設定をしてください。</p>\n                </dd>\n            </dl>\n        </div>\n\n        <h2 class=\"section-ttl\">電話番号\n            <span class=\"text-icon-red small-x-text\">入力必須</span>\n        </h2>\n        <div class=\"box radius bg-light-gray mb-large\">\n            <dl>\n                <dd>\n                    <input\n                        [class.validation]=\"inputForm.controls['telephone'].invalid && inputForm.controls['telephone'].touched\"\n                        type=\"tel\" formControlName=\"telephone\" autocomplete=\"tel\" placeholder=\"(例)08000000000\">\n                    <div *ngIf=\"inputForm.controls['telephone'].invalid && inputForm.controls['telephone'].touched\">\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.required\" class=\"validation-text\">電話番号が未入力です\n                        </div>\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.minlength\" class=\"validation-text\">\n                            電話番号は{{ inputForm.controls['telephone'].errors.minlength.requiredLength }}文字以上で入力してください\n                        </div>\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.maxlength\" class=\"validation-text\">\n                            電話番号は{{ inputForm.controls['telephone'].errors.maxlength.requiredLength }}文字以下で入力してください\n                        </div>\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.pattern\" class=\"validation-text\">\n                            電話番号は数字で入力してください</div>\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.telephone\" class=\"validation-text\">\n                            電話番号が正しくありません</div>\n                    </div>\n                    <p class=\"small-x-text\">※半角数字、ハイフン「-」なしで入力してください</p>\n                </dd>\n            </dl>\n        </div>\n\n        <div *ngIf=\"purchase.getTotalPrice() > 0\">\n            <h2 class=\"section-ttl\">\n                お支払情報\n                <span class=\"text-icon-red small-x-text\">入力必須</span>\n                <span class=\"image credit-image\">\n                    <img src=\"/assets/images/common/credit_card.png\" alt=\"\">\n                </span>\n            </h2>\n\n            <p class=\"mb-small\">クレジットカード決済の必要事項を入力ください。</p>\n            <div *ngIf=\"creditCardType === 'input'\" class=\"credit-input mb-small\">\n                <ul class=\"box radius bg-light-gray mb-large credit form-layout\">\n                    <li class=\"price\">\n                        <dl>\n                            <dt>ご利用金額</dt>\n                            <dd class=\"large-text red-text\">\n                                <strong>￥{{ purchase.getTotalPrice() }}</strong>\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>カード番号</dt>\n                            <dd>\n                                <input\n                                    [class.validation]=\"inputForm.controls['cardNumber'].invalid && inputForm.controls['cardNumber'].touched\"\n                                    type=\"text\" pattern=\"\\d*\" formControlName=\"cardNumber\" id=\"cardNumber\"\n                                    autocomplete=\"off\" placeholder=\"(例)1234567890\" maxlength=\"16\">\n                                <div\n                                    *ngIf=\"inputForm.controls['cardNumber'].invalid && inputForm.controls['cardNumber'].touched\">\n                                    <div *ngIf=\"inputForm.controls['cardNumber'].errors.required\"\n                                        class=\"validation-text\">カード番号が未入力です</div>\n                                    <div *ngIf=\"inputForm.controls['cardNumber'].errors.pattern\"\n                                        class=\"validation-text\">カード番号は数字で入力してください</div>\n                                </div>\n                                <p class=\"small-x-text\">※半角数字、ハイフン「-」なしで入力してください</p>\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>有効期限</dt>\n                            <dd>\n\n                                <select formControlName=\"cardExpirationMonth\" id=\"cardExpirationMonth\">\n\n                                    <option *ngFor=\"let month of cardExpiration.month\" [value]=\"month\">{{ month }}\n                                    </option>\n\n                                </select> 月\n                                <select formControlName=\"cardExpirationYear\" id=\"cardExpirationYear\">\n\n                                    <option *ngFor=\"let year of cardExpiration.year\" [value]=\"year\">{{ year }}</option>\n\n                                </select> 年\n\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>セキュリティーコード</dt>\n                            <dd>\n                                <input\n                                    [class.validation]=\"inputForm.controls['securityCode'].invalid && inputForm.controls['securityCode'].touched\"\n                                    type=\"text\" pattern=\"\\d*\" formControlName=\"securityCode\" autocomplete=\"off\"\n                                    placeholder=\"(例)123\" maxlength=\"4\">\n                                <div\n                                    *ngIf=\"inputForm.controls['securityCode'].invalid && inputForm.controls['securityCode'].touched\">\n                                    <div *ngIf=\"inputForm.controls['securityCode'].errors.required\"\n                                        class=\"validation-text\">セキュリティーコードが未入力です</div>\n                                </div>\n                                <p>\n                                    <a (click)=\"securityCodeModal = true\">セキュリティーコードについて</a>\n                                </p>\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>カード名義人</dt>\n                            <dd>\n                                <input\n                                    [class.validation]=\"inputForm.controls['holderName'].invalid && inputForm.controls['holderName'].touched\"\n                                    type=\"text\" formControlName=\"holderName\" autocomplete=\"off\"\n                                    placeholder=\"(例)TARO CINEMA\">\n                                <div\n                                    *ngIf=\"inputForm.controls['holderName'].invalid && inputForm.controls['holderName'].touched\">\n                                    <div *ngIf=\"inputForm.controls['holderName'].errors.required\"\n                                        class=\"validation-text\">カード名義人が未入力です</div>\n                                </div>\n                            </dd>\n                        </dl>\n                    </li>\n                </ul>\n\n                <div *ngIf=\"user.isMember()\" class=\"text-center mb-middle\">\n                    <input type=\"checkbox\" formControlName=\"saveCreditCard\" id=\"saveCreditCard\">\n                    <label for=\"saveCreditCard\">\n                        <strong>クレジットカード情報を保存する</strong>\n                    </label>\n                </div>\n\n                <div *ngIf=\"user.isRegisteredCreditCards()\" class=\"button gray-button\">\n                    <button type=\"button\" (click)=\"changeRegisteredCreditCard()\">登録済みクレジットカードを使用する</button>\n                </div>\n            </div>\n\n            <div *ngIf=\"creditCardType === 'registered'\" class=\"credit-registered mb-small\">\n                <ul class=\"box radius bg-light-gray mb-large credit form-layout\">\n                    <li class=\"price\">\n                        <dl>\n                            <dt>ご利用金額</dt>\n                            <dd class=\"large-text red-text\">\n                                <strong>￥{{ purchase.getTotalPrice() }}</strong>\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>カード番号</dt>\n                            <dd>{{ user.data.creditCards[0]?.cardNo }}</dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>有効期限</dt>\n                            <dd>{{ user.data.creditCards[0]?.expire }}</dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>カード名義人</dt>\n                            <dd>{{ user.data.creditCards[0]?.holderName }}</dd>\n                        </dl>\n                    </li>\n                </ul>\n                <input type=\"hidden\" formControlName=\"cardNumber\">\n                <input type=\"hidden\" formControlName=\"cardExpirationMonth\">\n                <input type=\"hidden\" formControlName=\"cardExpirationYear\">\n                <input type=\"hidden\" formControlName=\"securityCode\">\n                <input type=\"hidden\" formControlName=\"holderName\">\n                <div class=\"button gray-button\" (click)=\"changeInputCreditCard()\">\n                    <button type=\"button\">クレジットカードを変更する</button>\n                </div>\n            </div>\n            <div>\n                <div class=\"mb-x-small\">\n                    <strong>ご注意事項</strong>\n                </div>\n                <p class=\"small-x-text\">\n                    購入完了画面まで進まずにお取引を中断された場合でもご利用のカードによっては下記の事象が起こることがございますので、悪しからずご了承ください。\n                    <br>\n                    <strong>一部のクレジットカード会社からはカード利用速報のメールが配信される。</strong>\n                    <br> ⇒カード利用速報メールが配信されましても購入完了していなければ引き落とされることはありませんので、カード会社の月々の確定利用明細などをご確認ください。\n                    <br>\n                    <strong>プリペイド形式（デビットカード、LINEPayカード等）で一時的に残高が減る。</strong>\n                    <br> ⇒購入完了していない場合は後ほど残高が戻ります。残高が戻るまでの期間は各カード会社様によって異なります。\n                    <br>※スマートフォンアプリではプリペイド形式の使用は出来ません。\n                </p>\n            </div>\n        </div>\n\n        <app-buttons [disabled]=\"isLoading\" nextLabel=\"次へ\" prevLabel=\"戻る\" prevLink=\"/purchase/ticket\"></app-buttons>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-loading [show]=\"isLoading\"></app-loading>\n\n<app-modal class=\"security-code-modal\" [open]=\"securityCodeModal\" [layout]=\"false\" (close)=\"securityCodeModal = false\">\n    <div inner class=\"box radius bg-white\">\n        <div class=\"modal-title mb-xx-small text-center\">セキュリティーコードについて</div>\n        <p class=\"mb-middle small-x-text text-center\">※カード会社により表示箇所および名称が異なります。</p>\n        <div class=\"box radius bg-light-gray\">\n            <dl class=\"mb-middle\">\n                <dt>\n                    <strong>VISA / MASTER / DINERS / JCBの場合</strong>\n                </dt>\n                <dd>【カード裏面】セキュリティーコード(末尾3桁)</dd>\n                <dd>\n                    <img src=\"/assets/images/common/credit_back.svg\" alt=\"\">\n                </dd>\n            </dl>\n            <dl>\n                <dt>\n                    <strong>AMEXの場合</strong>\n                </dt>\n                <dd>【カード表面】セキュリティーコード(4桁)</dd>\n                <dd>\n                    <img src=\"/assets/images/common/credit_front.svg\" alt=\"\">\n                </dd>\n            </dl>\n        </div>\n    </div>\n</app-modal>\n\n<app-modal [open]=\"creditCardAlertModal\" [layout]=\"true\" (close)=\"creditCardAlertModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>エラーが発生しました</strong>\n    </div>\n</app-modal>","import { Component, ElementRef, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\nimport * as libphonenumber from 'libphonenumber-js';\nimport * as moment from 'moment';\nimport { convertToHiragana, convertToKatakana, formatTelephone } from '../../../../../functions';\nimport {\n    AwsCognitoService,\n    ErrorService,\n    IGmoTokenObject,\n    PurchaseService,\n    SasakiService,\n    UserService\n} from '../../../../../services';\nimport { LibphonenumberFormatPipe } from '../../../../shared/pipes';\n\n/**\n * クレジットカードタイプ\n */\nenum CreditCardType {\n    Input = 'input',\n    Registered = 'registered'\n}\n\n@Component({\n    selector: 'app-purchase-input',\n    templateUrl: './purchase-input.component.html',\n    styleUrls: ['./purchase-input.component.scss']\n})\nexport class PurchaseInputComponent implements OnInit {\n    public cardExpiration: {\n        year: string[];\n        month: string[];\n    };\n    public inputForm: FormGroup;\n    public isLoading: boolean;\n    public securityCodeModal: boolean;\n    public creditCardAlertModal: boolean;\n    public creditCardType: CreditCardType;\n\n    constructor(\n        public purchase: PurchaseService,\n        public user: UserService,\n        private elementRef: ElementRef,\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private error: ErrorService,\n        private awsCognito: AwsCognitoService,\n        private sasaki: SasakiService\n\n    ) { }\n\n    public async ngOnInit() {\n        window.scrollTo(0, 0);\n        this.isLoading = false;\n        this.cardExpiration = {\n            year: [],\n            month: []\n        };\n        this.inputForm = this.createForm();\n        this.creditCardType = CreditCardType.Input;\n        this.creditCardAlertModal = this.purchase.data.isCreditCardError;\n        if (this.purchase.data.isCreditCardError) {\n            // クレジットカードエラー\n            this.purchase.data.isCreditCardError = false;\n            this.inputForm.controls.cardNumber.markAsTouched();\n            this.inputForm.controls.cardExpirationMonth.markAsTouched();\n            this.inputForm.controls.cardExpirationYear.markAsTouched();\n            this.inputForm.controls.securityCode.markAsTouched();\n            this.inputForm.controls.holderName.markAsTouched();\n            this.validationScroll();\n        }\n        this.securityCodeModal = false;\n        try {\n            if (this.user.isNative() && !this.user.isMember()) {\n                // アプリ非会員ならCognitoから取得\n                const records = await this.awsCognito.getRecords({\n                    datasetName: 'profile'\n                });\n                if (records.familyName !== undefined\n                    || records.givenName !== undefined\n                    || records.email !== undefined\n                    || records.emailConfirm !== undefined\n                    || records.telephone !== undefined) {\n                    this.inputForm.controls.familyName.setValue(convertToKatakana(records.familyName));\n                    this.inputForm.controls.givenName.setValue(convertToKatakana(records.givenName));\n                    this.inputForm.controls.email.setValue(records.email);\n                    this.inputForm.controls.emailConfirm.setValue(records.email);\n                    this.inputForm.controls.telephone.setValue(records.telephone);\n                }\n            } else if (this.user.isMember()) {\n                // 会員\n                if (this.user.data.profile === undefined) {\n                    throw new Error('profile is undefined');\n                }\n                const profile = this.user.data.profile;\n                if (this.user.data.creditCards === undefined\n                    || this.user.data.creditCards.length === 0) {\n                    throw new Error('creditCards is notfoud');\n                }\n                const familyName = (profile.familyName === undefined) ? '' : convertToKatakana(profile.familyName);\n                const givenName = (profile.givenName === undefined) ? '' : convertToKatakana(profile.givenName);\n                const telephone = (profile.telephone === undefined) ? '' : formatTelephone(profile.telephone, 'National').replace(/-/g, '');\n                this.inputForm.controls.familyName.setValue(familyName);\n                this.inputForm.controls.givenName.setValue(givenName);\n                this.inputForm.controls.email.setValue(profile.email);\n                this.inputForm.controls.emailConfirm.setValue(profile.email);\n                this.inputForm.controls.telephone.setValue(telephone);\n\n                const payment = this.purchase.getTotalPrice();\n                if (payment > 0) {\n                    // クレジット決済ありならクレジットカードタイプを変更\n                    this.changeRegisteredCreditCard();\n                }\n            }\n        } catch (err) {\n            this.error.redirect(err);\n        }\n\n    }\n\n    /**\n     * バリデーションスクロール\n     * @method validationScroll\n     */\n    private validationScroll() {\n        setTimeout(() => {\n            const element: HTMLElement = this.elementRef.nativeElement;\n            const validation = <HTMLElement>element.querySelector('.validation');\n            if (validation === null) {\n                return;\n            }\n            const rect = validation.getBoundingClientRect();\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n            const top = rect.top + scrollTop - 50;\n            window.scrollTo(0, top);\n        }, 0);\n    }\n\n    /**\n     * 次へ\n     * @method onSubmit\n     */\n    public async onSubmit() {\n        if (this.inputForm.invalid) {\n            // フォームのステータス変更\n            this.inputForm.controls.familyName.markAsTouched();\n            this.inputForm.controls.givenName.markAsTouched();\n            this.inputForm.controls.email.markAsTouched();\n            this.inputForm.controls.emailConfirm.markAsTouched();\n            this.inputForm.controls.telephone.markAsTouched();\n            if (this.purchase.getTotalPrice() > 0) {\n                this.inputForm.controls.cardNumber.markAsTouched();\n                this.inputForm.controls.cardExpirationMonth.markAsTouched();\n                this.inputForm.controls.cardExpirationYear.markAsTouched();\n                this.inputForm.controls.securityCode.markAsTouched();\n                this.inputForm.controls.holderName.markAsTouched();\n            }\n            this.validationScroll();\n\n            return;\n        }\n        if (this.inputForm.controls.email.value !== this.inputForm.controls.emailConfirm.value) {\n            this.validationScroll();\n\n            return;\n        }\n        if (this.purchase.isExpired()) {\n            this.router.navigate(['/expired']);\n\n            return;\n        }\n        this.isLoading = true;\n        try {\n            if (this.purchase.data.transaction === undefined) {\n                throw new Error('status is different');\n            }\n            if (this.purchase.getTotalPrice() > 0) {\n                try {\n                    if (this.creditCardType === CreditCardType.Input) {\n                        this.purchase.data.gmoTokenObject = await this.getGmoObject();\n                        this.purchase.data.paymentCreditCard = {\n                            token: (<IGmoTokenObject>this.purchase.data.gmoTokenObject).token\n                        };\n                    } else {\n                        if (this.user.data.creditCards === undefined) {\n                            throw new Error('creditCards is undefined');\n                        }\n                        this.purchase.data.paymentCreditCard = {\n                            memberId: 'me',\n                            cardSeq: Number(this.user.data.creditCards[0].cardSeq)\n                        };\n                    }\n                } catch (err) {\n                    console.error(err);\n                    // クレジットカード処理失敗\n                    this.isLoading = false;\n                    this.creditCardAlertModal = true;\n                    if (this.creditCardType === CreditCardType.Input) {\n                        this.inputForm.controls.cardNumber.setValue('');\n                        this.inputForm.controls.securityCode.setValue('');\n                        this.inputForm.controls.holderName.setValue('');\n                    }\n                    return;\n                }\n                if (this.user.isMember()\n                    && this.inputForm.controls.saveCreditCard.value\n                    && this.purchase.data.gmoTokenObject !== undefined) {\n                    // 会員 クレジットカード情報保存\n                    await this.sasaki.getServices();\n                    const gmoTokenObject = await this.getGmoObject();\n                    await this.sasaki.ownershipInfo.addCreditCard({\n                        creditCard: {\n                            token: gmoTokenObject.token\n                        }\n                    });\n                }\n            }\n\n            // 入力情報を登録\n            const contact = {\n                familyName: convertToHiragana(this.inputForm.controls.familyName.value),\n                givenName: convertToHiragana(this.inputForm.controls.givenName.value),\n                email: this.inputForm.controls.email.value,\n                telephone: this.inputForm.controls.telephone.value\n            };\n            await this.purchase.customerContactRegistrationProcess(contact);\n            this.router.navigate(['/purchase/confirm']);\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n    /**\n     * GMOトークン取得\n     * @method getGmoToken\n     */\n    private async getGmoObject(): Promise<IGmoTokenObject> {\n        const sendParam = {\n            cardno: this.inputForm.controls.cardNumber.value,\n            expire: this.inputForm.controls.cardExpirationYear.value + this.inputForm.controls.cardExpirationMonth.value,\n            securitycode: this.inputForm.controls.securityCode.value,\n            holdername: this.inputForm.controls.holderName.value\n        };\n        // console.log(sendParam);\n        return new Promise<IGmoTokenObject>((resolve, reject) => {\n            const seller = this.purchase.data.seller;\n            if (seller === undefined\n                || seller.paymentAccepted === undefined) {\n                return reject(new Error('status is different'));\n            }\n            (<any>window).someCallbackFunction = function someCallbackFunction(response: any) {\n                if (response.resultCode === '000') {\n                    resolve(response.tokenObject);\n                } else {\n                    reject(new Error(response.resultCode));\n                }\n            };\n            const Multipayment = (<any>window).Multipayment;\n            const findPaymentAcceptedResult = seller.paymentAccepted.find((paymentAccepted) => {\n                return (paymentAccepted.paymentMethodType === factory.paymentMethodType.CreditCard);\n            });\n            if (findPaymentAcceptedResult === undefined) {\n                return reject(new Error('findPaymentAcceptedResult is undefined'));\n            }\n            Multipayment.init((<factory.seller.ICreditCardPaymentAccepted>findPaymentAcceptedResult).gmoInfo.shopId);\n            Multipayment.getToken(sendParam, (<any>window).someCallbackFunction);\n        });\n    }\n\n    /**\n     * フォーム作成\n     * @method createForm\n     */\n    private createForm() {\n        const payment = this.purchase.getTotalPrice();\n        const NAME_MAX_LENGTH = 12;\n        const MAIL_MAX_LENGTH = 50;\n        const TEL_MAX_LENGTH = 11;\n        const TEL_MIN_LENGTH = 9;\n        const customerContact = {\n            familyName: {\n                value: '',\n                validators: [\n                    Validators.required,\n                    Validators.maxLength(NAME_MAX_LENGTH),\n                    Validators.pattern(/^[ァ-ヶー]+$/)\n                ]\n            },\n            givenName: {\n                value: '',\n                validators: [\n                    Validators.required,\n                    Validators.maxLength(NAME_MAX_LENGTH),\n                    Validators.pattern(/^[ァ-ヶー]+$/)\n                ]\n            },\n            email: {\n                value: '', validators: [\n                    Validators.required,\n                    Validators.maxLength(MAIL_MAX_LENGTH),\n                    Validators.email\n                ]\n            },\n            emailConfirm: {\n                value: '', validators: [\n                    Validators.required,\n                    Validators.maxLength(MAIL_MAX_LENGTH),\n                    Validators.email\n                ]\n            },\n            telephone: {\n                value: '', validators: [\n                    Validators.required,\n                    Validators.maxLength(TEL_MAX_LENGTH),\n                    Validators.minLength(TEL_MIN_LENGTH),\n                    Validators.pattern(/^[0-9]+$/),\n                    (control: AbstractControl): ValidationErrors | null => {\n                        const field = control.root.get('telephone');\n                        if (field !== null) {\n                            const parsedNumber = libphonenumber.parse(field.value, 'JP');\n                            if (parsedNumber.phone === undefined) {\n                                return { telephone: true };\n                            }\n                            const isValid = libphonenumber.isValidNumber(parsedNumber);\n                            if (!isValid) {\n                                return { telephone: true };\n                            }\n                        }\n\n                        return null;\n                    }\n                ]\n            },\n            cardNumber: { value: '', validators: [Validators.required, Validators.pattern(/^[0-9]+$/)] },\n            cardExpirationMonth: { value: '01', validators: [Validators.required] },\n            cardExpirationYear: { value: moment().format('YYYY'), validators: [Validators.required] },\n            securityCode: { value: '', validators: [Validators.required] },\n            holderName: { value: '', validators: [Validators.required] }\n        };\n\n        if (this.purchase.data.customerContact !== undefined) {\n            // 購入者情報入力済み\n            const familyName = (this.purchase.data.customerContact.familyName === undefined)\n                ? '' : convertToKatakana(this.purchase.data.customerContact.familyName);\n            const givenName = (this.purchase.data.customerContact.givenName === undefined)\n                ? '' : convertToKatakana(this.purchase.data.customerContact.givenName);\n            const email = (this.purchase.data.customerContact.email === undefined)\n                ? '' : this.purchase.data.customerContact.email;\n            const telephone = (this.purchase.data.customerContact.telephone === undefined)\n                ? '' : new LibphonenumberFormatPipe().transform(this.purchase.data.customerContact.telephone);\n            customerContact.familyName.value = familyName;\n            customerContact.givenName.value = givenName;\n            customerContact.email.value = email;\n            customerContact.emailConfirm.value = email;\n            customerContact.telephone.value = telephone;\n        }\n        if (payment > 0) {\n            // 決済あり\n            for (let i = 0; i < 12; i++) {\n                const DIGITS = -2;\n                this.cardExpiration.month.push(`0${String(i + 1)}`.slice(DIGITS));\n            }\n            for (let i = 0; i < 10; i++) {\n                this.cardExpiration.year.push(moment().add(i, 'year').format('YYYY'));\n            }\n\n            if (this.user.isMember()) {\n                // 会員\n                return this.formBuilder.group({\n                    familyName: [customerContact.familyName.value, customerContact.familyName.validators],\n                    givenName: [customerContact.givenName.value, customerContact.givenName.validators],\n                    email: [customerContact.email.value, customerContact.email.validators],\n                    emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\n                    telephone: [customerContact.telephone.value, customerContact.telephone.validators],\n                    cardNumber: [customerContact.cardNumber.value, customerContact.cardNumber.validators],\n                    cardExpirationMonth: [customerContact.cardExpirationMonth.value, customerContact.cardExpirationMonth.validators],\n                    cardExpirationYear: [customerContact.cardExpirationYear.value, customerContact.cardExpirationYear.validators],\n                    securityCode: [customerContact.securityCode.value, customerContact.securityCode.validators],\n                    holderName: [customerContact.holderName.value, customerContact.holderName.validators],\n                    saveCreditCard: [false]\n                });\n            } else {\n                // 非会員\n                return this.formBuilder.group({\n                    familyName: [customerContact.familyName.value, customerContact.familyName.validators],\n                    givenName: [customerContact.givenName.value, customerContact.givenName.validators],\n                    email: [customerContact.email.value, customerContact.email.validators],\n                    emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\n                    telephone: [customerContact.telephone.value, customerContact.telephone.validators],\n                    cardNumber: [customerContact.cardNumber.value, customerContact.cardNumber.validators],\n                    cardExpirationMonth: [customerContact.cardExpirationMonth.value, customerContact.cardExpirationMonth.validators],\n                    cardExpirationYear: [customerContact.cardExpirationYear.value, customerContact.cardExpirationYear.validators],\n                    securityCode: [customerContact.securityCode.value, customerContact.securityCode.validators],\n                    holderName: [customerContact.holderName.value, customerContact.holderName.validators]\n                });\n            }\n\n        } else {\n            // 決済なし\n            return this.formBuilder.group({\n                familyName: [customerContact.familyName.value, customerContact.familyName.validators],\n                givenName: [customerContact.givenName.value, customerContact.givenName.validators],\n                email: [customerContact.email.value, customerContact.email.validators],\n                emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\n                telephone: [customerContact.telephone.value, customerContact.telephone.validators]\n            });\n        }\n    }\n\n    /**\n     * クレジットカード情報入力へ変更\n     */\n    public changeInputCreditCard() {\n        this.creditCardType = CreditCardType.Input;\n        this.inputForm.controls.cardNumber.setValue('');\n        this.inputForm.controls.cardExpirationMonth.setValue('01');\n        this.inputForm.controls.cardExpirationYear.setValue(moment().format('YYYY'));\n        this.inputForm.controls.securityCode.setValue('');\n        this.inputForm.controls.holderName.setValue('');\n    }\n\n    /**\n     * 登録済みクレジットカードへ変更\n     */\n    public changeRegisteredCreditCard() {\n        this.creditCardType = CreditCardType.Registered;\n        this.inputForm.controls.cardNumber.setValue('4111111111111111');\n        this.inputForm.controls.cardExpirationMonth.setValue('01');\n        this.inputForm.controls.cardExpirationYear.setValue(moment().format('YYYY'));\n        this.inputForm.controls.securityCode.setValue('123');\n        this.inputForm.controls.holderName.setValue('TEST');\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">ムビチケ券適用内容確認</h1>\n    <p class=\"read\">内容に問題なければ「券種選択へ戻る」ボタンを押してください。\n        <br>\n        <span class=\"small-text\">※券種選択よりムビチケ券を選択してください。</span>\n    </p>\n    <ul class=\"box radius bg-light-gray mb-middle mvtk-lists\">\n\n        <li *ngFor=\"let mvtkTicket of purchase.data.mvtkTickets\">\n            <dl class=\"d-table\">\n                <dt class=\"d-td\">ムビチケ購入番号 {{ mvtkTicket.input.knyknrNo }}</dt>\n                <dd class=\"d-td width-medium\">\n                    <strong>{{ mvtkTicket.mvtkTicketcodeResult.ticketName }} × {{ mvtkTicket.ykknInfo.ykknKnshbtsmiNum }}</strong>\n                </dd>\n            </dl>\n        </li>\n\n    </ul>\n\n\n    <form (ngSubmit)=\"onSubmit()\">\n        <app-buttons nextLabel=\"券種選択へ戻る\" prevLabel=\"戻る\" prevLink=\"/purchase/mvtk/input\"></app-buttons>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ErrorService, PurchaseService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-mvtk-confirm',\n    templateUrl: './purchase-mvtk-confirm.component.html',\n    styleUrls: ['./purchase-mvtk-confirm.component.scss']\n})\nexport class PurchaseMvtkConfirmComponent implements OnInit {\n\n    constructor(\n        public purchase: PurchaseService,\n        private router: Router,\n        private error: ErrorService\n    ) { }\n\n    public ngOnInit() {\n        window.scrollTo(0, 0);\n        if (this.purchase.data.mvtkTickets === undefined) {\n            this.error.redirect(new Error('status is different'));\n        }\n        // console.log(this.purchase.data.mvtkTickets);\n    }\n\n    public onSubmit() {\n        this.router.navigate(['/purchase/ticket']);\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">ムビチケ券認証</h1>\n    <p class=\"read\">ご利用になるムビチケ券の購入番号と、暗証番号を入力してください。\n        <br>複数枚ご利用になる場合は「ムビチケ券を追加」ボタンを押して追加してください。</p>\n\n    <div *ngFor=\"let mvtkForm of mvtkForms; let index = index\" class=\"ticket-list mb-middle\">\n        <form [formGroup]=\"mvtkForm\">\n            <div class=\"mvtk-box\">\n                <div *ngIf=\"mvtkForms.length > 1\" class=\"button light-gray-button remove-button\">\n                    <a (click)=\"removeMvtk(index)\">削除</a>\n                </div>\n                <ul class=\"box radius bg-light-gray mb-small form-layout\">\n                    <li>\n                        <dl>\n                            <dt>ムビチケ購入番号</dt>\n                            <dd>\n                                <input class=\"mvtk-code\" [class.validation]=\"mvtkForm.controls['code'].invalid && mvtkForm.controls['code'].touched\" type=\"text\" formControlName=\"code\"\n                                    autocomplete=\"off\" placeholder=\"(例)012345789\" maxlength=\"10\">\n                                <div *ngIf=\"mvtkForm.controls['code'].invalid && mvtkForm.controls['code'].touched\">\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.required\" class=\"validation-text\">ムビチケ購入番号が未入力です</div>\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.maxlength\" class=\"validation-text\">ムビチケ購入番号は{{ mvtkForm.controls['code'].errors.maxlength.requiredLength }}文字で入力してください</div>\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.minlength\" class=\"validation-text\">ムビチケ購入番号は{{ mvtkForm.controls['code'].errors.minlength.requiredLength }}文字で入力してください</div>\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.pattern\" class=\"validation-text\">ムビチケ購入番号は数字で入力してください</div>\n                                </div>\n                            </dd>\n                        </dl>\n                    </li>\n                    <li>\n                        <dl>\n                            <dt>ムビチケ暗証番号</dt>\n                            <dd>\n                                <input [class.validation]=\"mvtkForm.controls['password'].invalid && mvtkForm.controls['password'].touched\" type=\"password\"\n                                    formControlName=\"password\" autocomplete=\"off\" placeholder=\"(例)0123\" maxlength=\"4\">\n                                <div *ngIf=\"mvtkForm.controls['password'].invalid && mvtkForm.controls['password'].touched\">\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.required\" class=\"validation-text\">ムビチケ暗証番号が未入力です</div>\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.maxlength\" class=\"validation-text\">ムビチケ暗証番号は{{ mvtkForm.controls['password'].errors.maxlength.requiredLength }}文字で入力してください</div>\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.minlength\" class=\"validation-text\">ムビチケ暗証番号は{{ mvtkForm.controls['password'].errors.minlength.requiredLength }}文字で入力してください</div>\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.pattern\" class=\"validation-text\">ムビチケ暗証番号は数字で入力してください</div>\n                                </div>\n                            </dd>\n                        </dl>\n                    </li>\n                </ul>\n            </div>\n        </form>\n    </div>\n\n    <div *ngIf=\"purchase.data.tmpSeatReservationAuthorization?.object.acceptedOffer.length > mvtkForms.length\" class=\"button dark-blue-button add-button mb-middle center-button\">\n        <a class=\"icon-add-white\" (click)=\"addMvtk()\">ムビチケ券を追加</a>\n    </div>\n\n    <div class=\"box radius bg-light-gray mb-small\">\n        <div class=\"box-ttl\">選択中の座席</div>\n        <div class=\"text-right large-text\">\n            <strong>{{ purchase.data.tmpSeatReservationAuthorization?.object.acceptedOffer.length }}席</strong>\n        </div>\n    </div>\n\n    <p class=\"small-x-text\">※不足金額が発生した場合は別途クレジットカードにてお支払いいただきます。</p>\n\n    <form (ngSubmit)=\"onSubmit()\">\n        <app-buttons [disabled]=\"isLoading\" nextLabel=\"認証する\" prevLabel=\"戻る\" prevLink=\"/purchase/ticket\"></app-buttons>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-modal [open]=\"inputValidationModal\" [layout]=\"true\" (close)=\"inputValidationModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>入力項目にエラーがあります</strong>\n    </div>\n    <p class=\"text-center\">入力項目をご確認ください。</p>\n</app-modal>\n\n<app-modal [open]=\"authErrorModal\" [layout]=\"true\" (close)=\"authErrorModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>認証に失敗しました</strong>\n    </div>\n    <p class=\"text-center\">購入番号と暗証番号、もしくはムビチケ券の対象作品を再度ご確認ください。</p>\n</app-modal>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { PurchaseService } from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-mvtk-input',\n    templateUrl: './purchase-mvtk-input.component.html',\n    styleUrls: ['./purchase-mvtk-input.component.scss']\n})\nexport class PurchaseMvtkInputComponent implements OnInit {\n    public mvtkForms: FormGroup[];\n    public mvtkInputForm: FormGroup;\n    public inputValidationModal: boolean;\n    public authErrorModal: boolean;\n    public isLoading: boolean;\n\n    constructor(\n        public purchase: PurchaseService,\n        private formBuilder: FormBuilder,\n        private router: Router\n    ) { }\n\n    public ngOnInit() {\n        window.scrollTo(0, 0);\n        this.isLoading = false;\n        this.inputValidationModal = false;\n        this.authErrorModal = false;\n        this.mvtkForms = [];\n        this.mvtkForms.push(this.createForm());\n        this.mvtkInputForm = this.formBuilder.group({});\n    }\n\n    /**\n     * フォーム作成\n     * @method createForm\n     */\n    private createForm() {\n        const CODE_LENGTH = 10;\n        const PASSWORD_LENGTH = 4;\n        return this.formBuilder.group({\n            code: ['', [\n                Validators.required,\n                Validators.maxLength(CODE_LENGTH),\n                Validators.minLength(CODE_LENGTH),\n                Validators.pattern(/^[0-9]+$/)\n            ]],\n            password: ['', [\n                Validators.required,\n                Validators.maxLength(PASSWORD_LENGTH),\n                Validators.minLength(PASSWORD_LENGTH),\n                Validators.pattern(/^[0-9]+$/)\n            ]]\n        });\n    }\n\n    /**\n     * ムビチケ券追加\n     * @method addMvtk\n     */\n    public addMvtk() {\n        this.mvtkForms.push(this.createForm());\n    }\n\n    /**\n     * ムビチケ券削除\n     * @method removeMvtk\n     */\n    public removeMvtk(index: number) {\n        this.mvtkForms.splice(index, 1);\n    }\n\n    /**\n     * ムビチケ認証\n     */\n    public async onSubmit() {\n        this.mvtkForms.forEach((mvtkForm, index) => {\n            const mvtkCodeList = document.querySelectorAll('.mvtk-code');\n            const value = (<HTMLInputElement>mvtkCodeList[index]).value;\n            mvtkForm.controls.code.setValue(value);\n        });\n        const mvtkForms = this.mvtkForms.filter((group) => {\n            return (!group.invalid);\n        });\n        if (mvtkForms.length !== this.mvtkForms.length) {\n            this.inputValidationModal = true;\n\n            return;\n        }\n        this.isLoading = true;\n        if (this.purchase.isExpired()) {\n            this.router.navigate(['/expired']);\n\n            return;\n        }\n        try {\n            const mvtkData = mvtkForms.map((mvtkForm) => {\n                return {\n                    knyknrNo: mvtkForm.controls.code.value,\n                    pinCd: mvtkForm.controls.password.value\n                };\n            });\n            await this.purchase.mvtkAuthenticationProcess(mvtkData);\n            this.router.navigate(['purchase/mvtk/confirm']);\n        } catch (err) {\n            console.error(err);\n            this.isLoading = false;\n            this.authErrorModal = true;\n        }\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl red-text\">仮予約の座席があります</h1>\n    <p class=\"read\">現在、仮予約の座席があります。\n        <br>仮予約の座席の購入を進めるか、新しく選択した内容で購入を進めるか選択してください。\n        <br>仮予約の内容は下記になります。</p>\n\n    <div class=\"form-layout mb-x-large\">\n        <h2 class=\"section-ttl\">仮予約の上映スケジュール</h2>\n        <ul class=\"box radius bg-light-gray mb-large\">\n            <li>\n                <dl>\n                    <dt>劇場 / スクリーン</dt>\n                    <dd>{{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>作品名</dt>\n                    <dd>{{ purchase.getTitle() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>鑑賞日時</dt>\n                    <dd>\n                        {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{ purchase.getEndDate() }}\n                    </dd>\n                </dl>\n            </li>\n        </ul>\n        <p class=\"text-center mb-x-small\">上記の仮予約内容で購入手続きへ戻ります。</p>\n        <form (ngSubmit)=\"returnTransaction()\">\n            <app-next-button [disabled]=\"isLoading\">仮予約の購入手続きへ戻る</app-next-button>\n        </form>\n    </div>\n\n    <div class=\"form-layout\">\n        <h2 class=\"section-ttl\">新しく選択した上映スケジュール</h2>\n        <ul class=\"box radius bg-light-gray mb-large\">\n            <li>\n                <dl>\n                    <dt>劇場 / スクリーン</dt>\n                    <dd>{{ getTheaterName() }} / {{ getScreenName() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>作品名</dt>\n                    <dd>{{ getTitle() }}</dd>\n                </dl>\n            </li>\n            <li>\n                <dl>\n                    <dt>鑑賞日時</dt>\n                    <dd>\n                        {{ getAppreciationDate() }} {{ getStartDate() }} - {{ getEndDate() }}\n                    </dd>\n                </dl>\n            </li>\n        </ul>\n        <p class=\"text-center  mb-x-small\">仮予約を削除し、新しく選択した上映スケジュールの購入手続きを進めます。</p>\n        <form (ngSubmit)=\"newTransaction()\">\n            <app-next-button [disabled]=\"isLoading\">仮予約を削除して次へ進む</app-next-button>\n        </form>\n    </div>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\nimport * as moment from 'moment';\nimport { environment } from '../../../../../../environments/environment';\nimport { object2query } from '../../../../../functions';\nimport { ErrorService, PurchaseService, SaveType, StorageService } from '../../../../../services';\nimport { TimeFormatPipe } from '../../../../shared/pipes';\n\n@Component({\n    selector: 'app-purchase-overlap',\n    templateUrl: './purchase-overlap.component.html',\n    styleUrls: ['./purchase-overlap.component.scss']\n})\nexport class PurchaseOverlapComponent implements OnInit {\n    public isLoading: boolean;\n    public screeningEvent: factory.chevre.event.screeningEvent.IEvent;\n\n    constructor(\n        private storage: StorageService,\n        public purchase: PurchaseService,\n        private router: Router,\n        private error: ErrorService\n    ) { }\n\n    public async ngOnInit() {\n        window.scrollTo(0, 0);\n        this.isLoading = false;\n        try {\n            // イベント情報取得\n            this.screeningEvent = <factory.chevre.event.screeningEvent.IEvent>this.storage.load('screeningEvent', SaveType.Session);\n            if (this.screeningEvent === null) {\n                throw new Error('screeningEvent is null');\n            }\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n    /**\n     * 予約中のフローへ戻る\n     */\n    public returnTransaction() {\n        this.router.navigate(['/purchase/seat']);\n    }\n\n    /**\n     * 新しい取引へ\n     */\n    public async newTransaction() {\n        this.isLoading = true;\n        try {\n            // 座席取り消し\n            if (this.purchase.data.tmpSeatReservationAuthorization !== undefined) {\n                await this.purchase.cancelSeatRegistrationProcess();\n            }\n        } catch (error) {\n            console.error(error);\n        }\n        this.purchase.reset();\n        this.storage.remove('screeningEvent', SaveType.Session);\n        const params = this.storage.load('parameters', SaveType.Session);\n        params.passportToken = undefined;\n        params.signInRedirect = false;\n        const query = object2query(params);\n        location.href = `${environment.ENTRANCE_SERVER_URL}/purchase/index.html?${query}`;\n    }\n\n    /**\n     * 劇場名取得\n     * @method getTheaterName\n     * @returns {string}\n     */\n    public getTheaterName() {\n        return this.screeningEvent.superEvent.location.name.ja;\n    }\n\n    /**\n     * スクリーン名取得\n     * @method getScreenName\n     * @returns {string}\n     */\n    public getScreenName() {\n        return this.screeningEvent.location.name.ja;\n    }\n\n    /**\n     * 作品名取得\n     * @method getTitle\n     * @returns {string}\n     */\n    public getTitle() {\n        return this.screeningEvent.name.ja;\n    }\n\n    /**\n     * 鑑賞日取得\n     * @method getAppreciationDate\n     * @returns {string}\n     */\n    public getAppreciationDate() {\n        if (this.screeningEvent.coaInfo === undefined) {\n            return '';\n        }\n        moment.locale('ja');\n\n        return moment(this.screeningEvent.coaInfo.dateJouei).format('YYYY年MM月DD日(ddd)');\n    }\n\n    /**\n     * 上映開始時間取得\n     * @method getStartDate\n     * @returns {string}\n     */\n    public getStartDate() {\n        if (this.screeningEvent.coaInfo === undefined) {\n            return '';\n        }\n        const timeFormat = new TimeFormatPipe();\n\n        return timeFormat.transform(\n            this.screeningEvent.startDate,\n            this.screeningEvent.coaInfo.dateJouei\n        );\n    }\n\n    /**\n     * 上映終了取得\n     * @method getEndDate\n     * @returns {string}\n     */\n    public getEndDate() {\n        if (this.screeningEvent.coaInfo === undefined) {\n            return '';\n        }\n        const timeFormat = new TimeFormatPipe();\n\n        return timeFormat.transform(\n            this.screeningEvent.endDate,\n            this.screeningEvent.coaInfo.dateJouei\n        );\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">ポイント使用</h1>\n    <p class=\"read\">\n        貯まったポイントの使用方法を選択してください。\n    </p>\n    <div class=\"mb-middle point text-center\">\n        <div class=\"inner bg-gray\">現在\n            <strong class=\"large-text\">{{ user.data.account?.typeOfGood.availableBalance }}</strong> ポイント</div>\n    </div>\n\n    <ul *ngIf=\"!isLoading\" class=\"box radius bg-light-gray mb-middle tickets\">\n        <li *ngFor=\"let pointTicket of pointTickets\">\n            <dl>\n                <dt>\n                    <div class=\"small-x-text mb-x-small\">{{ pointTicket.usePoint }}ポイントで引き換え</div>\n                    <div>\n                        <strong>{{ pointTicket.ticketName }}</strong>\n                    </div>\n                </dt>\n                <dd>\n                    <select [(ngModel)]=\"selectTickets[pointTicket.ticketCode]\">\n                        <option *ngFor=\"let value of ticketValueList\" value=\"{{ value }}\">{{ value }}枚</option>\n                    </select>\n                </dd>\n            </dl>\n        </li>\n    </ul>\n\n    <form (ngSubmit)=\"onSubmit()\">\n        <app-buttons nextLabel=\"券種に追加する\" prevLabel=\"戻る\" prevLink=\"/purchase/ticket\"></app-buttons>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-modal [open]=\"pointAhortageAlertModal\" [layout]=\"true\" (close)=\"pointAhortageAlertModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>ポイントが不足しています</strong>\n    </div>\n    <p class=\"text-center\">選択した券種の合計ポイントが所持ポイントを超えています。\n    </p>\n</app-modal>\n\n<app-modal [open]=\"notSelectAlertModal\" [layout]=\"true\" (close)=\"notSelectAlertModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>券種が選択されていません</strong>\n    </div>\n    <p class=\"text-center\">券種を選択してください。\n    </p>\n</app-modal>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport * as COA from '@motionpicture/coa-service';\nimport {\n    ErrorService,\n    FlgMember,\n    PurchaseService,\n    SasakiService,\n    UserService\n} from '../../../../../services';\n\n\n@Component({\n    selector: 'app-purchase-point',\n    templateUrl: './purchase-point.component.html',\n    styleUrls: ['./purchase-point.component.scss']\n})\nexport class PurchasePointComponent implements OnInit {\n\n    public isLoading: boolean;\n    public pointTickets: COA.services.master.ITicketResult[];\n    public ticketValueList: number[];\n    public selectTickets: {\n        [key: string]: number;\n    };\n    public pointAhortageAlertModal: boolean;\n    public notSelectAlertModal: boolean;\n\n    constructor(\n        public user: UserService,\n        private sasaki: SasakiService,\n        private purchase: PurchaseService,\n        private error: ErrorService,\n        private router: Router\n    ) { }\n\n    public async ngOnInit() {\n        this.pointAhortageAlertModal = false;\n        this.isLoading = true;\n        this.pointTickets = [];\n        this.selectTickets = {};\n        try {\n            const screeningEvent = this.purchase.data.screeningEvent;\n            const tmpSeatReservationAuthorization = this.purchase.data.tmpSeatReservationAuthorization;\n            if (screeningEvent === undefined\n                || screeningEvent.coaInfo === undefined\n                || tmpSeatReservationAuthorization === undefined) {\n                throw new Error('status is different');\n            }\n            const reserveLength = tmpSeatReservationAuthorization.object.acceptedOffer.length;\n            this.ticketValueList = [];\n            for (let i = 0; i < (reserveLength + 1); i++) {\n                this.ticketValueList.push(i);\n            }\n            const masterTickets = await this.sasaki.getTickets({\n                theaterCode: screeningEvent.coaInfo.theaterCode\n            });\n            this.pointTickets = masterTickets.filter((masterTicket) => {\n                const salesTicket = this.purchase.data.salesTickets.find((ticket) => {\n                    return ticket.ticketCode === masterTicket.ticketCode;\n                });\n                return (masterTicket.usePoint > 0\n                    && masterTicket.flgMember === FlgMember.Member\n                    && salesTicket !== undefined);\n            });\n            for (const pointTicket of this.pointTickets) {\n                this.selectTickets[pointTicket.ticketCode] = 0;\n            }\n            // console.log('pointTickets', this.pointTickets);\n        } catch (err) {\n            this.error.redirect(err);\n        }\n        this.isLoading = false;\n    }\n\n    public onSubmit() {\n        let usePoint = 0;\n        for (const ticket of this.pointTickets) {\n            usePoint += ticket.usePoint * this.selectTickets[ticket.ticketCode];\n        }\n        if (this.user.data.account === undefined) {\n            this.error.redirect(new Error('account is undefined'));\n\n            return;\n        }\n        if (usePoint === 0) {\n            this.notSelectAlertModal = true;\n\n            return;\n        }\n        if (this.user.data.account.typeOfGood.availableBalance < usePoint) {\n            this.pointAhortageAlertModal = true;\n\n            return;\n        }\n        this.purchase.data.pointTickets = [];\n        for (const ticket of this.pointTickets) {\n            for (let i = 0; i < this.selectTickets[ticket.ticketCode]; i++) {\n                this.purchase.data.pointTickets.push(ticket);\n            }\n        }\n        this.purchase.save();\n        this.router.navigate(['/purchase/ticket']);\n    }\n\n}\n","<div class=\"contents\">\n\n    <h1 class=\"page-ttl\">スケジュール選択</h1>\n    <p class=\"read\">こちらからチケットの購入をする事が出来ます。\n        <br>ご希望の鑑賞作品、鑑賞日時を選択してください。</p>\n    <div class=\"inquiry-buttons mb-middle\">\n        <div *ngFor=\"let theater of theaters\" class=\"button blue-button center-button inquiry-button\">\n            <a\n                href=\"{{ environment.FRONTEND_ENDPOINT }}/inquiry/login?theater={{ theater.location.branchCode }}\">{{ theater.name.ja }}照会</a>\n        </div>\n    </div>\n\n    <div class=\"mb-middle\">\n        <dl>\n            <dt class=\"mb-x-small\">劇場</dt>\n            <dd class=\"mb-small\">\n                <select [(ngModel)]=\"conditions.theater\" (change)=\"changeConditions()\">\n                    <option *ngFor=\"let theater of theaters\" value=\"{{ theater.location.branchCode }}\">\n                        {{ theater.name.ja }}</option>\n                </select>\n            </dd>\n        </dl>\n        <dl>\n            <dt class=\"mb-x-small\">会員ステータス</dt>\n            <dd class=\"mb-small\">\n                <select [(ngModel)]=\"conditions.member\" (change)=\"changeConditions()\">\n                    <option [value]=\"false\">非会員</option>\n                    <option [value]=\"true\">会員</option>\n                </select>\n            </dd>\n        </dl>\n        <dl>\n            <dt class=\"mb-x-small\">鑑賞日</dt>\n            <dd class=\"mb-small\">\n                <select [(ngModel)]=\"conditions.date\" (change)=\"changeConditions()\">\n                    <option *ngFor=\"let date of dateList\" value=\"{{ date.value }}\">{{ date.label }}</option>\n                </select>\n            </dd>\n        </dl>\n    </div>\n\n    <ul class=\"film-order\">\n        <app-purchase-film-order *ngFor=\"let film of filmOrder\" [data]=\"film\" [member]=\"conditions.member\"></app-purchase-film-order>\n    </ul>\n\n</div>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\nimport * as moment from 'moment';\nimport { environment } from '../../../../../../environments/environment';\nimport { ErrorService, PurchaseService, SasakiService } from '../../../../../services';\n\ntype IMovieTheater = factory.seller.IOrganization<factory.seller.IAttributes<factory.organizationType>>;\ninterface IFilmOrder {\n    id: string;\n    films: factory.chevre.event.screeningEvent.IEvent[];\n}\n\ninterface IDate {\n    value: string;\n    label: string;\n}\n\n@Component({\n    selector: 'app-purchase-schedule',\n    templateUrl: './purchase-schedule.component.html',\n    styleUrls: ['./purchase-schedule.component.scss']\n})\nexport class PurchaseScheduleComponent implements OnInit {\n    public theaters: IMovieTheater[];\n    public isLoading: boolean;\n    public dateList: IDate[];\n    public filmOrder: IFilmOrder[];\n    public schedules: factory.chevre.event.screeningEvent.IEvent[];\n    public conditions: { theater: string; date: string; member: boolean; };\n    public environment = environment;\n\n    constructor(\n        private error: ErrorService,\n        private purchase: PurchaseService,\n        private sasaki: SasakiService\n    ) {\n        this.theaters = [];\n        this.dateList = [];\n        this.filmOrder = [];\n        this.conditions = {\n            theater: '',\n            date: '',\n            member: false\n        };\n    }\n\n    /**\n     * 初期化\n     * @method ngOnInit\n     * @returns {Promise<void>}\n     */\n    public async ngOnInit(): Promise<void> {\n        window.scrollTo(0, 0);\n        this.isLoading = true;\n        try {\n            await this.sasaki.getServices();\n            const searchResult = await this.sasaki.seller.search({});\n            this.theaters =\n                searchResult.data.filter((t) => {\n                    return (t.location !== undefined && t.location !== null && t.location.branchCode !== undefined);\n                });\n            this.dateList = this.getDateList();\n            const theater = this.theaters[this.theaters.length - 1];\n            if (theater.location === undefined\n                || theater.location.branchCode === undefined) {\n                throw new Error('branchCode is undefined');\n            }\n            this.conditions = {\n                theater: theater.location.branchCode,\n                date: this.dateList[0].value,\n                member: false\n            };\n            await this.changeConditions();\n        } catch (err) {\n            this.error.redirect(err);\n        }\n        this.isLoading = false;\n    }\n\n    /**\n     * @method getDateList\n     * @returns {IDate[]}\n     */\n    public getDateList(): IDate[] {\n        const results = [];\n        const limit = 35;\n        for (let i = 0; i < limit; i++) {\n            const date = moment().add(i, 'day');\n            results.push({\n                value: date.format('YYYYMMDD'),\n                label: date.format('YYYY/MM/DD(ddd)')\n            });\n        }\n\n        return results;\n    }\n\n    /**\n     * 条件変更\n     * @method changeConditions\n     * @returns {Promise<void>}\n     */\n    public async changeConditions(): Promise<void> {\n        this.isLoading = true;\n        this.filmOrder = [];\n        try {\n            await this.sasaki.getServices();\n            const searchScreeningEventsResult = await this.sasaki.event.searchScreeningEvents({\n                typeOf: factory.chevre.eventType.ScreeningEvent,\n                superEvent: {\n                    locationBranchCodes: [this.conditions.theater]\n                },\n                startFrom: moment(this.conditions.date).toDate(),\n                startThrough: moment(this.conditions.date).add(1, 'day').toDate()\n            });\n            this.schedules = searchScreeningEventsResult.data;\n            this.filmOrder = this.getEventFilmOrder();\n            // console.log(this.filmOrder);\n        } catch (err) {\n            this.error.redirect(err);\n        }\n        this.isLoading = false;\n    }\n\n    /**\n     * 作品別上映スケジュール取得\n     * @function getScreeningEvents\n     * @returns {IFilmOrder[]}\n     */\n    public getEventFilmOrder(): IFilmOrder[] {\n        const results: IFilmOrder[] = [];\n        this.schedules.forEach((screeningEvent) => {\n            // 販売可能時間判定\n            if (!this.purchase.isSalseTime(screeningEvent)) {\n                return;\n            }\n            const film = results.find((event) => {\n                return (event.id === screeningEvent.superEvent.id);\n            });\n            if (film === undefined) {\n                results.push({\n                    id: screeningEvent.superEvent.id,\n                    films: [screeningEvent]\n                });\n            } else {\n                film.films.push(screeningEvent);\n            }\n        });\n\n        return results;\n    }\n\n}\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">座席選択</h1>\n    <p class=\"read\">ご希望の座席を選択して「次へ」ボタンを押してください。\n        <br>選択できる座席数は最大\n        <span class=\"seat-limit-text\">{{ purchase.data.screeningEvent?.coaInfo?.availableNum }}</span>席までとなります。\n        <br>\n        <span class=\"sp-text\">画面をタッチすると画面がズームしますので座席を選択してください。\n            <br>\n        </span>\n        <span class=\"small-x-text\">※車椅子席をご希望の方は、お手数ですが通常のお席をご購入の上、対象の劇場にご連絡ください。</span>\n    </p>\n    <div class=\"mb-middle\">\n        <app-screen *ngIf=\"screenData\" [screenConfig]=\"screenData.screenConfig\" [screen]=\"screenData.screen\"\n            [status]=\"screenData.status\" (select)=\"seatSelect($event)\" (alert)=\"seatSelectionAlert()\">\n            <app-seat-info type=\"{{ purchase.data.screeningEvent?.superEvent.coaInfo?.kbnJoueihousiki?.kubunCode }}\">\n            </app-seat-info>\n        </app-screen>\n    </div>\n\n    <div class=\"mb-middle seat-types\">\n        <ul>\n            <li *ngIf=\"getSeatType('grandClass')\" class=\"seat-grand-class\">\n                <div class=\"seat-type-inner\">\n                    <div class=\"image\"><img src=\"/images/theater/seat/grand-class.svg\"></div>\n                    <div class=\"text\">\n                        <p class=\"font-weight-bold\">グランドクラス<br>+￥3,000</p>\n                    </div>\n                </div>\n            </li>\n            <li *ngIf=\"getSeatType('premiumClass')\" class=\"seat-premium-class\">\n                <div class=\"seat-type-inner\">\n                    <div class=\"image\"><img src=\"/images/theater/seat/premium-class.svg\"></div>\n                    <div class=\"text\">\n                        <p class=\"font-weight-bold\">プレミアムクラス<br>+￥1,500</p>\n                    </div>\n                </div>\n            </li>\n            <li *ngIf=\"getSeatType('comfort')\" class=\"seat-comfort\">\n                <div class=\"seat-type-inner\">\n                    <div class=\"image\"><img src=\"/images/theater/seat/comfort.svg\"></div>\n                    <div class=\"text\">\n                        <p class=\"font-weight-bold\">フラットシート</p>\n                    </div>\n                </div>\n            </li>\n            <li *ngIf=\"getSeatType('ottoman')\" class=\"seat-ottoman\">\n                <div class=\"seat-type-inner\">\n                    <div class=\"image\"><img src=\"/images/theater/seat/ottoman.svg\"></div>\n                    <div class=\"text\">\n                        <p class=\"font-weight-bold\">スタンダードクラス<br>オットマン</p>\n                    </div>\n                </div>\n            </li>\n            <li *ngIf=\"getSeatType('parentAndChildPairLeft') || getSeatType('parentAndChildPairRight')\" class=\"seat-parent-and-child-pair\">\n                <div class=\"seat-type-inner\">\n                    <div class=\"image\"><img src=\"/images/theater/seat/parent-and-child-pair.svg\"></div>\n                    <div class=\"text\">\n                        <p class=\"font-weight-bold\">おやこペアシート</p>\n                        <p class=\"small-x-text\">２席単位での販売です。<br>大人＋小学生以下もしくは小学生以下２名のご利用をお勧めします。</p>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n\n    <div class=\"film-info radius mb-large\">\n        <p class=\"mb-small\">現在、選択されているチケットは下記のとおりです。</p>\n        <dl>\n            <dt>劇場 / スクリーン</dt>\n            <dd class=\"border-bottom-dot\">\n                {{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}\n            </dd>\n            <dt>鑑賞日時</dt>\n            <dd class=\"border-bottom-dot\">\n                {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{ purchase.getEndDate() }}\n            </dd>\n            <dt>作品名</dt>\n            <dd>{{ purchase.getTitle() }}</dd>\n        </dl>\n    </div>\n\n    <h2 class=\"section-ttl\">利用規約</h2>\n    <p class=\"mb-small\">利用規約に同意した上で「次へ」ボタンを押してください。</p>\n\n    <app-purchase-term class=\"mb-middle\"\n        [theaterCode]=\"purchase.data.screeningEvent?.superEvent.location.branchCode.slice(-2)\"></app-purchase-term>\n\n    <form [formGroup]=\"seatForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"mb-x-large text-center\">\n            <input type=\"checkbox\" formControlName=\"terms\" id=\"terms\">\n            <label for=\"terms\" class=\"agree-label\">\n                <strong>利用規約に同意する</strong>\n            </label>\n            <div *ngIf=\"seatForm.controls['terms'].invalid && (seatForm.controls['terms'].dirty || seatForm.controls['terms'].touched)\"\n                class=\"validation-text\">利用規約に同意してください</div>\n        </div>\n\n        <div class=\"button-area\">\n            <div class=\"button next-button blue-button\">\n                <button [disabled]=\"isLoading\" type=\"submit\">\n                    <app-icon iconName=\"next-white\" width=\"15\" height=\"15\"></app-icon>次へ\n                </button>\n            </div>\n            <div class=\"prev-link ticket-app-hide\">\n                <a href=\"{{ purchase.data.seller?.url }}\">\n                    <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る\n                </a>\n            </div>\n            <div class=\"prev-link ticket-app-show\">\n                <a href=\"{{ environment.APP_SITE_URL }}/#/purchase\">\n                    <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る\n                </a>\n            </div>\n        </div>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-modal [open]=\"notSelectSeatModal\" [layout]=\"true\" (close)=\"notSelectSeatModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>座席が未選択です</strong>\n    </div>\n    <p class=\"text-center\">ご希望の空席を選択して「次へ」ボタンを押してください。</p>\n</app-modal>\n\n<app-modal [open]=\"upperLimitModal\" [layout]=\"true\" (close)=\"upperLimitModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>予約座席数が上限です</strong>\n    </div>\n    <p class=\"text-center\">予約座席数は最大\n        <span class=\"seat-limit-text\">{{ purchase.data.screeningEvent?.coaInfo?.availableNum }}</span>席までとなります。</p>\n</app-modal>\n\n<app-modal [open]=\"seatRegistrationErrorModal\" [layout]=\"true\" (close)=\"seatRegistrationErrorModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>エラーが発生しました</strong>\n    </div>\n    <p class=\"text-center\">\n        お手続きの途中でエラーが発生しました。<br>\n        お手数をおかけしますが、もう一度操作をお願いいたします。<br>\n        ※すでに他のお客様が同じ座席を選択した場合もこのエラーが表示されます。\n    </p>\n</app-modal>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport * as COA from '@motionpicture/coa-service';\nimport { environment } from '../../../../../../environments/environment';\nimport { IScreenConfig, ISeat } from '../../../../../models';\nimport {\n    ErrorService,\n    FlgMember,\n    ISalesTicketResult,\n    PurchaseService,\n    SasakiService,\n    UserService\n} from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-seat',\n    templateUrl: './purchase-seat.component.html',\n    styleUrls: ['./purchase-seat.component.scss']\n})\nexport class PurchaseSeatComponent implements OnInit {\n    public isLoading: boolean;\n    public seatForm: FormGroup;\n    public notSelectSeatModal: boolean;\n    public upperLimitModal: boolean;\n    public seats: ISeat[];\n    public screenData: {\n        screenConfig: IScreenConfig;\n        status: COA.services.reserve.IStateReserveSeatResult;\n    };\n    public environment = environment;\n    public seatRegistrationErrorModal: boolean;\n\n    constructor(\n        public purchase: PurchaseService,\n        private router: Router,\n        private formBuilder: FormBuilder,\n        private sasaki: SasakiService,\n        private error: ErrorService,\n        private user: UserService,\n        private http: HttpClient\n    ) { }\n\n    public async ngOnInit() {\n        window.scrollTo(0, 0);\n        this.isLoading = true;\n        this.notSelectSeatModal = false;\n        this.seatRegistrationErrorModal = false;\n        this.seats = [];\n        this.seatForm = this.formBuilder.group({\n            terms: [false, [Validators.requiredTrue]]\n        });\n        if (this.purchase.data.screeningEvent === undefined) {\n            this.error.redirect(new Error('screeningEvent is undefined'));\n\n            return;\n        }\n\n        if (this.purchase.data.screeningEvent.coaInfo === undefined) {\n            this.error.redirect(new Error('coaInfo is undefined'));\n\n            return;\n        }\n        try {\n            this.screenData = await this.getData({\n                theaterCode: this.purchase.data.screeningEvent.coaInfo.theaterCode,\n                dateJouei: this.purchase.data.screeningEvent.coaInfo.dateJouei,\n                titleCode: this.purchase.data.screeningEvent.coaInfo.titleCode,\n                titleBranchNum: this.purchase.data.screeningEvent.coaInfo.titleBranchNum,\n                timeBegin: this.purchase.data.screeningEvent.coaInfo.timeBegin,\n                screenCode: this.purchase.data.screeningEvent.coaInfo.screenCode\n            });\n            this.isLoading = false;\n        } catch (error) {\n            this.error.redirect(error);\n\n            return;\n        }\n    }\n\n    /**\n     * データ取得\n     * @method getData\n     */\n    public async getData(params: {\n        theaterCode: string;\n        dateJouei: string;\n        titleCode: string;\n        titleBranchNum: string;\n        timeBegin: string;\n        screenCode: string;\n    }): Promise<{\n        screenConfig: IScreenConfig,\n        status: COA.services.reserve.IStateReserveSeatResult\n        screen: COA.services.master.IScreenResult\n    }> {\n        const DIGITS = { '02': -2, '03': -3 };\n        const theaterCode = `00${params.theaterCode}`.slice(DIGITS['02']);\n        const screenCode = `000${params.screenCode}`.slice(DIGITS['03']);\n        const screenConfig = await this.http.get<IScreenConfig>(`/json/theater/${theaterCode}/${screenCode}.json`).toPromise();\n        const setting = await this.http.get<IScreenConfig>('/json/theater/setting.json').toPromise();\n\n        await this.sasaki.getServices();\n        const status = await this.sasaki.getSeatState({\n            theaterCode: params.theaterCode,\n            dateJouei: params.dateJouei,\n            titleCode: params.titleCode,\n            titleBranchNum: params.titleBranchNum,\n            timeBegin: params.timeBegin,\n            screenCode: params.screenCode\n        });\n        const screens = await this.sasaki.getScreens({\n            theaterCode: params.theaterCode\n        });\n        const screen = screens.find(s => s.screenCode === params.screenCode);\n        if (screen === undefined) {\n            throw new Error('screen notfound');\n        }\n        // スクリーンデータをマージ\n        return {\n            screenConfig: Object.assign(setting, screenConfig),\n            status,\n            screen\n        };\n    }\n\n    /**\n     * スクリーン読み込み完了\n     * @method loadScreen\n     * @param {ISeat[]} seats\n     */\n    public loadScreen(seats: ISeat[]) {\n        this.isLoading = false;\n        this.seats = seats;\n    }\n\n    /**\n     * 販売可能チケット情報取得\n     * @method getSalesTickets\n     */\n    public async fitchSalesTickets() {\n        const screeningEvent = this.purchase.data.screeningEvent;\n        if (screeningEvent === undefined) {\n            throw new Error('screeningEvent is undefined');\n        }\n        if (screeningEvent.coaInfo === undefined) {\n            throw new Error('coaInfo is undefined');\n        }\n        await this.sasaki.getServices();\n        const salesTicketArgs = {\n            theaterCode: screeningEvent.coaInfo.theaterCode,\n            dateJouei: screeningEvent.coaInfo.dateJouei,\n            titleCode: screeningEvent.coaInfo.titleCode,\n            titleBranchNum: screeningEvent.coaInfo.titleBranchNum,\n            timeBegin: screeningEvent.coaInfo.timeBegin,\n            flgMember: (this.user.isMember()) ? FlgMember.Member : FlgMember.NonMember\n        };\n        const salesTickets = await this.sasaki.getSalesTickets(salesTicketArgs);\n        // console.log('salesTickets', salesTicketArgs, salesTickets);\n\n        return salesTickets;\n    }\n\n    /**\n     * 次へ\n     * @method onSubmit\n     */\n    public async onSubmit() {\n        if (this.seats.length === 0) {\n            this.notSelectSeatModal = true;\n            return;\n        }\n        if (this.seatForm.invalid) {\n            this.seatForm.controls.terms.markAsDirty();\n\n            return;\n        }\n        this.isLoading = true;\n        if (this.purchase.isExpired()) {\n            this.router.navigate(['/expired']);\n\n            return;\n        }\n\n        try {\n            // 券種取得\n            if (this.purchase.data.salesTickets.length === 0) {\n                this.purchase.data.salesTickets = await this.fitchSalesTickets();\n            }\n        } catch (error) {\n            this.error.redirect(error);\n\n            return;\n        }\n\n        try {\n            // 座席取り消し\n            if (this.purchase.data.tmpSeatReservationAuthorization !== undefined) {\n                await this.purchase.cancelSeatRegistrationProcess();\n            }\n        } catch (error) {\n            this.error.redirect(error);\n\n            return;\n        }\n\n        try {\n            const offers = this.seats.map((seat) => {\n                const salesTicket = (<ISalesTicketResult[]>this.purchase.data.salesTickets)[0];\n\n                return {\n                    seatSection: seat.coaInfo.section,\n                    seatNumber: seat.coaInfo.seatNum,\n                    ticketInfo: {\n                        ticketCode: salesTicket.ticketCode,\n                        mvtkAppPrice: 0,\n                        ticketCount: 1,\n                        addGlasses: 0,\n                        kbnEisyahousiki: '00',\n                        mvtkNum: '',\n                        mvtkKbnDenshiken: '00',\n                        mvtkKbnMaeuriken: '00',\n                        mvtkKbnKensyu: '00',\n                        mvtkSalesPrice: 0\n                    }\n                };\n            });\n            await this.purchase.seatRegistrationProcess(offers);\n            this.router.navigate(['/purchase/ticket']);\n        } catch (error) {\n            this.seatRegistrationErrorModal = true;\n            this.isLoading = false;\n        }\n    }\n\n    /**\n     * 座席選択\n     * @method seatSelect\n     * @param {Iseat[]} seats\n     */\n    public seatSelect(seats: ISeat[]) {\n        this.seats = seats;\n    }\n\n    /**\n     * 座席選択数警告\n     * @method seatSelectionAlert\n     */\n    public seatSelectionAlert() {\n        this.upperLimitModal = true;\n    }\n\n    public getSeatType(seatType:\n        'ottoman'\n        | 'comfort'\n        | 'grandClass'\n        | 'premiumClass'\n        | 'parentAndChildPairLeft'\n        | 'parentAndChildPairRight') {\n        if (this.screenData === undefined) {\n            return false;\n        }\n        const findSpecialSeatsResult = this.screenData.screenConfig.specialSeats.find(s => s.name === seatType);\n        return (findSpecialSeatsResult !== undefined && findSpecialSeatsResult.data.length > 0);\n    }\n\n}\n\n","<div class=\"contents\">\n    <h1 class=\"page-ttl\">券種選択</h1>\n    <p class=\"read\">ご希望の券種を選択して「次へ」ボタンを押してください。</p>\n\n    <div *ngIf=\"purchase.isUsedMvtk() && purchase.data.mvtkTickets.length === 0\" class=\"box radius bg-ultra-light-gray mb-middle mvtk\">\n        <dl class=\"d-table\">\n            <dt class=\"d-td\">ムビチケ券を利用される方</dt>\n            <dd class=\"d-td width-medium\">\n                <div class=\"ghost-button mvtk-button\">\n                    <a routerLink=\"/purchase/mvtk/input\">\n                        <img src=\"/assets/images/common/mvtk_logo.svg\" alt=\"ムビチケ\">を利用する\n                    </a>\n                </div>\n            </dd>\n        </dl>\n    </div>\n\n    <div *ngIf=\"user.isMember() && purchase.isUsedPoint() && purchase.data.pointTickets.length === 0\" class=\"box radius bg-ultra-light-gray mb-middle point\">\n        <dl class=\"d-table\">\n            <dt class=\"d-td\">会員ポイントを利用される方</dt>\n            <dd class=\"d-td width-medium\">\n                <div class=\"ghost-button point-button\">\n                    <a routerLink=\"/purchase/point\">\n                        <strong>会員ポイント</strong>を利用する\n                    </a>\n                </div>\n            </dd>\n        </dl>\n    </div>\n\n    <ul class=\"box radius bg-light-gray mb-middle seats\">\n        <li *ngFor=\"let offer of offers\">\n            <dl class=\"d-table\">\n                <dt class=\"d-td seat-code\">{{ offer.seatNumber }}</dt>\n                <dd class=\"d-td width-medium\" [class.validation]=\"offer.validation\">\n                    <div *ngIf=\"!offer.selected\" class=\"button blue-button\">\n                        <button type=\"button\" (click)=\"ticketSelect(offer)\">券種を選択してください</button>\n                    </div>\n                    <div *ngIf=\"offer.selected\" class=\"blue-button ghost-button\">\n                        <button type=\"button\" (click)=\"ticketSelect(offer)\">\n                            {{ offer.ticketInfo.ticketName }} ￥{{ getTicketPrice(offer) }}\n                        </button>\n                    </div>\n                </dd>\n            </dl>\n        </li>\n    </ul>\n\n    <div class=\"box radius bg-light-gray mb-large total\">\n        <div class=\"text-right mb-small\">\n            <div class=\"length mb-x-small\">購入枚数\n                <strong class=\"red-text large-text\">{{ offers.length }}枚</strong>\n            </div>\n            <div class=\"price\">合計金額\n                <strong class=\"red-text large-text\">\n                    <span>{{ totalPrice }}</span>円</strong>\n            </div>\n        </div>\n        <div class=\"border-bottom-dot mb-small\"></div>\n        <!-- 4DX -->\n        <p *ngIf=\"(purchase.data.screeningEvent?.superEvent.coaInfo?.kbnJoueihousiki?.kubunCode === '002')\" class=\"small-x-text mb-xx-small\">\n            ※[４DXをご鑑賞のお客様へ]\n            <br> ４DX®作品は「身長100cm未満の方は入場不可」「身長120cm未満のお子様は保護者同伴」の入場制限がありますので、ご注意くださいませ。\n            <br> また、妊娠されている方、ご高齢の方、心臓・背中・腰・首などに障害のある方、特別な疾病のある方、乗り物酔いしやすい方、体調に不安のある方はご利用になれません。\n            <br> 上映中のホットドリンク・アルコールはご遠慮ください。\n        </p>\n        <p class=\"small-x-text\">※メンバーズカード提示による割引やその他割引券などのご利用はできません。\n            <br>※車椅子席をご希望の方は、お手数ですが通常のお席をご購入の上、対象の劇場にご連絡ください。\n            <br>※ムビチケ券によっては別途追加料金が発生する場合がありますのでご了承ください。\n        </p>\n    </div>\n    <form [formGroup]=\"ticketForm\" (ngSubmit)=\"onSubmit()\">\n        <app-buttons [disabled]=\"isLoading\" nextLabel=\"次へ\" prevLabel=\"戻る\" prevLink=\"/purchase/seat\"></app-buttons>\n    </form>\n    <app-site-seal></app-site-seal>\n</div>\n\n<app-modal [open]=\"ticketsModal\" [layout]=\"false\" (close)=\"ticketsModal = false\">\n    <ul inner class=\"not-layout box bg-light-gray\">\n        <li *ngFor=\"let mvtkTicket of salesMvtkTickets\" [class.disabled]=\"mvtkTicket.selected\">\n            <dl class=\"d-table\">\n                <dt class=\"d-td\">\n                    <div class=\"mb-xx-small\">\n                        <strong>\n                            {{ mvtkTicket.ticketName }} ￥{{ getSalseTicketPrice(mvtkTicket) }}\n                        </strong>\n                    </div>\n                    <p class=\"small-x-text\">ムビチケ購入番号 {{ mvtkTicket.knyknrNoInfo.knyknrNo }}</p>\n                </dt>\n                <dd class=\"d-td width-small\">\n                    <div class=\"button blue-button ticket-type-select\">\n                        <button type=\"button\" (click)=\"selectMvtkTicket(mvtkTicket)\">選択</button>\n                    </div>\n                </dd>\n            </dl>\n        </li>\n        <li *ngFor=\"let pointTicket of salesPointTickets\" [class.disabled]=\"pointTicket.selected\">\n                <dl class=\"d-table\">\n                    <dt class=\"d-td\">\n                        <div class=\"mb-xx-small\">\n                            <strong>{{ pointTicket.ticketName }} ￥{{ getSalseTicketPrice(pointTicket) }}</strong>\n                        </div>\n                        <p class=\"small-x-text\">{{ pointTicket.ticketNote }}</p>\n                    </dt>\n                    <dd class=\"d-td width-small\">\n                        <div class=\"button blue-button ticket-type-select\">\n                            <button type=\"button\" (click)=\"selectSalseTicket(pointTicket)\">選択</button>\n                        </div>\n                    </dd>\n                </dl>\n            </li>\n        <li *ngFor=\"let ticket of salesTickets\">\n            <dl class=\"d-table\">\n                <dt class=\"d-td\">\n                    <div class=\"mb-xx-small\">\n                        <strong>{{ ticket.ticketName }} ￥{{ getSalseTicketPrice(ticket) }}</strong>\n                    </div>\n                    <p class=\"small-x-text\">{{ ticket.ticketNote }}</p>\n                </dt>\n                <dd class=\"d-td width-small\">\n                    <div class=\"button blue-button ticket-type-select\">\n                        <button type=\"button\" (click)=\"selectSalseTicket(ticket)\">選択</button>\n                    </div>\n                </dd>\n            </dl>\n        </li>\n    </ul>\n</app-modal>\n\n<app-modal [open]=\"notSelectModal\" [layout]=\"true\" (close)=\"notSelectModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>券種が未選択です</strong>\n    </div>\n    <p class=\"text-center\">ご希望の券種を選択して「次へ」ボタンを押してください。</p>\n</app-modal>\n\n<app-modal [open]=\"discountConditionsModal\" [layout]=\"true\" (close)=\"discountConditionsModal = false\">\n    <div class=\"modal-title large-text text-center mb-middle\">\n        <strong>割引条件が満たされていません</strong>\n    </div>\n    <p class=\"text-center\">選択した券種の中に、割引券が含まれています。\n        <br> 割引券の適用条件を再度ご確認ください。\n    </p>\n</app-modal>\n\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { environment } from '../../../../../../environments/environment';\nimport { getTicketPrice } from '../../../../../functions';\nimport {\n    ErrorService,\n    IMvtkTicket,\n    ISalesTicketResult,\n    PurchaseService,\n    UserService\n} from '../../../../../services';\n\ninterface Ioffer {\n    price?: number;\n    priceCurrency: string;\n    seatNumber: string;\n    seatSection: string;\n    selected: boolean;\n    limitCount: number;\n    limitUnit: string;\n    validation: boolean;\n    ticketInfo: {\n        mvtkNum: string;\n        ticketCode: string;\n        ticketName: string;\n        mvtkAppPrice: number;\n        addGlasses: number;\n        kbnEisyahousiki: string;\n        mvtkKbnDenshiken: string;\n        mvtkKbnMaeuriken: string;\n        mvtkKbnKensyu: string;\n        mvtkSalesPrice: number;\n        addPrice: number,\n        disPrice: number,\n        salePrice: number,\n        seatNum: string;\n        stdPrice: number,\n        ticketCount: number,\n        ticketNameEng: string;\n        ticketNameKana: string;\n        usePoint?: number;\n        spseatAdd1: number;\n        spseatAdd2: number;\n        spseatKbn: string;\n    };\n}\n\ninterface ISalesMvtkTicket extends IMvtkTicket {\n    id: string;\n    selected: boolean;\n    addGlasses: number;\n    salePrice: number;\n    ticketName: string;\n}\n\ninterface ISalesPointTicket extends ISalesTicketResult {\n    id: string;\n    selected: boolean;\n}\n\n@Component({\n    selector: 'app-purchase-ticket',\n    templateUrl: './purchase-ticket.component.html',\n    styleUrls: ['./purchase-ticket.component.scss']\n})\nexport class PurchaseTicketComponent implements OnInit {\n    public offers: Ioffer[];\n    public totalPrice: number;\n    public selectOffer: Ioffer;\n    public ticketsModal: boolean;\n    public originalSaleTickets: ISalesTicketResult[];\n    public ltdSelected: Ioffer | undefined;\n    public isLoading: boolean;\n    public discountConditionsModal: boolean;\n    public notSelectModal: boolean;\n    public salesTickets: ISalesTicketResult[];\n    public salesMvtkTickets: ISalesMvtkTicket[];\n    public salesPointTickets: ISalesPointTicket[];\n    public ticketForm: FormGroup;\n    public getTicketPrice = getTicketPrice;\n\n    constructor(\n        public purchase: PurchaseService,\n        public user: UserService,\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private error: ErrorService\n    ) { }\n\n    public ngOnInit() {\n        window.scrollTo(0, 0);\n        this.purchase.load();\n        this.isLoading = false;\n        this.ticketsModal = false;\n        this.discountConditionsModal = false;\n        this.notSelectModal = false;\n        this.ticketForm = this.formBuilder.group({});\n        try {\n            this.salesTickets = this.createSalseTickets();\n            this.salesMvtkTickets = this.createSalseMvtkTickets();\n            this.salesPointTickets = this.createSalsePointTickets();\n            this.setOffers();\n            this.totalPrice = this.getTotalPrice();\n            this.upDateSalseTickets();\n            this.originalSaleTickets = [...this.salesTickets];\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n    /**\n     * 販売可能チケット生成\n     * @method createSalseTickets\n     */\n    private createSalseTickets() {\n        const screeningEvent = this.purchase.data.screeningEvent;\n        if (screeningEvent === undefined) {\n            throw new Error('screeningEvent is undefined');\n        }\n        const pointInfo = environment.POINT_TICKET.find((ticket) => {\n            return (screeningEvent.coaInfo !== undefined\n                && ticket.THEATER === screeningEvent.coaInfo.theaterCode);\n        });\n        const results = [];\n        for (const salesTicket of this.purchase.data.salesTickets) {\n            if (pointInfo !== undefined) {\n                // ポイント券種除外\n                const pointTicketCodeList = pointInfo.TICKET_CODE;\n                const ticketCode = pointTicketCodeList.find((pointTicketcode) => {\n                    return pointTicketcode === salesTicket.ticketCode;\n                });\n                if (ticketCode !== undefined) {\n                    continue;\n                }\n            }\n\n            const noGlassesBase = {};\n            const noGlasses = Object.assign(noGlassesBase, salesTicket);\n            noGlasses.addGlasses = 0;\n            results.push(noGlasses);\n            if (salesTicket.addGlasses > 0) {\n                // メガネあり券種作成\n                const glassesBase = {};\n                const glasses = Object.assign(glassesBase, salesTicket);\n                glasses.salePrice = glasses.salePrice + glasses.addGlasses;\n                glasses.ticketName = `${glasses.ticketName}メガネ込み`;\n                results.push(glasses);\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * ムビチケ券種リスト生成\n     * @method createSalseMvtkTickets\n     */\n    private createSalseMvtkTickets() {\n        const results = [];\n        for (const mvtkTicket of this.purchase.data.mvtkTickets) {\n            for (let i = 0; i < Number(mvtkTicket.ykknInfo.ykknKnshbtsmiNum); i++) {\n                const DIGITS = -2;\n                const count = `00${i}`.slice(DIGITS);\n                const noGlassesBase = {\n                    id: `${mvtkTicket.knyknrNoInfo.knyknrNo}${mvtkTicket.ykknInfo.ykknshTyp}${count}`,\n                    selected: false,\n                    addGlasses: 0,\n                    salePrice: Number(mvtkTicket.mvtkTicketcodeResult.addPrice),\n                    ticketName: mvtkTicket.mvtkTicketcodeResult.ticketName\n                };\n                const noGlasses = Object.assign(noGlassesBase, mvtkTicket);\n                results.push(noGlasses);\n                if (mvtkTicket.mvtkTicketcodeResult.addPriceGlasses > 0) {\n                    // メガネあり券種作成\n                    const glassesBase = {\n                        id: `${mvtkTicket.knyknrNoInfo.knyknrNo}${mvtkTicket.ykknInfo.ykknshTyp}${count}`,\n                        selected: false,\n                        addGlasses: Number(mvtkTicket.mvtkTicketcodeResult.addPriceGlasses),\n                        salePrice:\n                            Number(mvtkTicket.mvtkTicketcodeResult.addPriceGlasses) + Number(mvtkTicket.mvtkTicketcodeResult.addPrice),\n                        ticketName: `${mvtkTicket.mvtkTicketcodeResult.ticketName} メガネ込み`\n                    };\n                    const glasses = Object.assign(glassesBase, mvtkTicket);\n                    results.push(glasses);\n                }\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * ポイントチケット生成\n     * @method createSalsePointTickets\n     */\n    private createSalsePointTickets() {\n        const results = [];\n        let count = 0;\n        for (const pointTicket of this.purchase.data.pointTickets) {\n            const salesTicket = this.purchase.data.salesTickets.find((ticket) => {\n                return ticket.ticketCode === pointTicket.ticketCode;\n            });\n            if (salesTicket === undefined) {\n                throw new Error('salesTicket is not found');\n            }\n            const data = {\n                ticketCode: salesTicket.ticketCode,\n                ticketName: salesTicket.ticketName,\n                ticketNameKana: salesTicket.ticketNameKana,\n                ticketNameEng: salesTicket.ticketNameEng,\n                stdPrice: salesTicket.salePrice,\n                addPrice: salesTicket.addPrice,\n                salePrice: salesTicket.salePrice,\n                limitCount: salesTicket.limitCount,\n                limitUnit: salesTicket.limitUnit,\n                ticketNote: salesTicket.ticketNote,\n                addGlasses: salesTicket.addGlasses,\n                selected: false,\n                id: `${salesTicket.ticketCode}${count}`\n            };\n            const noGlassesBase = {};\n            const noGlasses = Object.assign(noGlassesBase, data);\n            noGlasses.addGlasses = 0;\n            results.push(noGlasses);\n            if (data.addGlasses > 0) {\n                // メガネあり券種作成\n                const glassesBase = {};\n                const glasses = Object.assign(glassesBase, data);\n                glasses.salePrice = glasses.salePrice + glasses.addGlasses;\n                glasses.ticketName = `${glasses.ticketName}メガネ込み`;\n                results.push(glasses);\n            }\n            count++;\n        }\n\n        return results;\n    }\n\n    /**\n     * 券種リスト更新\n     * @method upDateSalseTickets\n     */\n    public upDateSalseTickets() {\n        // ムビチケ券種\n        for (const ticket of this.salesMvtkTickets) {\n            ticket.selected = false;\n        }\n        for (const offer of this.offers) {\n            if (offer.ticketInfo.mvtkNum === '') {\n                continue;\n            }\n            // 選択済みへ変更\n            const sameTicket = this.salesMvtkTickets.find((ticket) => {\n                return (offer.ticketInfo.mvtkNum === ticket.knyknrNoInfo.knyknrNo\n                    && offer.ticketInfo.ticketCode === ticket.mvtkTicketcodeResult.ticketCode\n                    && !ticket.selected);\n            });\n            if (sameTicket !== undefined) {\n                sameTicket.selected = true;\n                const sameGlassesTicket = this.salesMvtkTickets.find((ticket) => {\n                    return (sameTicket.id === ticket.id && !ticket.selected);\n                });\n                if (sameGlassesTicket !== undefined) {\n                    sameGlassesTicket.selected = true;\n                }\n            }\n        }\n        // ポイント券種\n        for (const ticket of this.salesPointTickets) {\n            ticket.selected = false;\n        }\n        for (const offer of this.offers) {\n            if (offer.ticketInfo.usePoint === 0) {\n                continue;\n            }\n            // 選択済みへ変更\n            const sameTicket = this.salesPointTickets.find((ticket) => {\n                return (offer.ticketInfo.ticketCode === ticket.ticketCode\n                    && !ticket.selected);\n            });\n            if (sameTicket !== undefined) {\n                sameTicket.selected = true;\n                const sameGlassesTicket = this.salesPointTickets.find((ticket) => {\n                    return (sameTicket.id === ticket.id && !ticket.selected);\n                });\n                if (sameGlassesTicket !== undefined) {\n                    sameGlassesTicket.selected = true;\n                }\n            }\n        }\n    }\n\n    /**\n     * 次へ\n     * @method onSubmit\n     */\n    public async onSubmit() {\n        const notSelectOffers = this.offers.filter((offer) => {\n            return (!offer.selected);\n        });\n        if (notSelectOffers.length > 0) {\n            this.notSelectModal = true;\n\n            return;\n        }\n        if (this.ticketValidation()) {\n            window.scrollTo(0, 0);\n            this.discountConditionsModal = true;\n\n            return;\n        }\n        this.isLoading = true;\n        if (this.purchase.isExpired()) {\n            this.router.navigate(['/expired']);\n\n            return;\n        }\n        try {\n            const offers = this.offers.map((offer) => {\n                return {\n                    seatSection: offer.seatSection,\n                    seatNumber: offer.seatNumber,\n                    ticketInfo: offer.ticketInfo\n                };\n            });\n            await this.purchase.ticketRegistrationProcess(offers);\n            this.router.navigate(['/purchase/input']);\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n    /**\n     * オファーを登録\n     * @method setOffers\n     */\n    private setOffers() {\n        if (this.purchase.data.seatReservationAuthorization === undefined\n            && this.purchase.data.tmpSeatReservationAuthorization !== undefined) {\n            this.offers = this.purchase.data.tmpSeatReservationAuthorization.object.acceptedOffer.map((offer) => {\n\n                return {\n                    price: offer.price,\n                    priceCurrency: offer.priceCurrency,\n                    seatNumber: offer.seatNumber,\n                    seatSection: offer.seatSection,\n                    mvtkNum: '',\n                    selected: false,\n                    limitCount: 0,\n                    limitUnit: '',\n                    validation: false,\n                    ticketInfo: (<any>offer.ticketInfo)\n                };\n            });\n        } else if (this.purchase.data.seatReservationAuthorization !== undefined) {\n            this.offers = this.purchase.data.seatReservationAuthorization.object.acceptedOffer.map((offer) => {\n                if (offer.ticketInfo.mvtkNum !== '') {\n                    // ムビチケ\n                    return {\n                        price: offer.price,\n                        priceCurrency: offer.priceCurrency,\n                        seatNumber: offer.seatNumber,\n                        seatSection: offer.seatSection,\n                        mvtkNum: offer.ticketInfo.mvtkNum,\n                        selected: true,\n                        limitCount: 1,\n                        limitUnit: '001',\n                        validation: false,\n                        ticketInfo: (<any>offer.ticketInfo)\n                    };\n                } else if (offer.ticketInfo.usePoint > 0) {\n                    // ポイント\n                    const ticket = this.salesPointTickets.find((salseTicket) => {\n                        return (offer.ticketInfo.ticketCode === salseTicket.ticketCode\n                            && offer.ticketInfo.addGlasses === salseTicket.addGlasses);\n                    });\n\n                    if (ticket === undefined) {\n                        throw new Error('ticket is not found');\n                    }\n\n                    return {\n                        price: offer.price,\n                        priceCurrency: offer.priceCurrency,\n                        seatNumber: offer.seatNumber,\n                        seatSection: offer.seatSection,\n                        mvtkNum: offer.ticketInfo.mvtkNum,\n                        selected: true,\n                        limitCount: ticket.limitCount,\n                        limitUnit: ticket.limitUnit,\n                        validation: false,\n                        ticketInfo: (<any>offer.ticketInfo)\n                    };\n                } else {\n                    // 通常\n                    const ticket = this.salesTickets.find((salseTicket) => {\n                        return (offer.ticketInfo.ticketCode === salseTicket.ticketCode\n                            && offer.ticketInfo.addGlasses === salseTicket.addGlasses);\n                    });\n\n                    if (ticket === undefined) {\n                        throw new Error('ticket is not found');\n                    }\n\n                    return {\n                        price: offer.price,\n                        priceCurrency: offer.priceCurrency,\n                        seatNumber: offer.seatNumber,\n                        seatSection: offer.seatSection,\n                        mvtkNum: offer.ticketInfo.mvtkNum,\n                        selected: true,\n                        limitCount: ticket.limitCount,\n                        limitUnit: ticket.limitUnit,\n                        validation: false,\n                        ticketInfo: (<any>offer.ticketInfo)\n                    };\n                }\n            });\n        }\n    }\n\n    /**\n     * 制限単位、人数制限判定\n     * @method ticketValidation\n     */\n    public ticketValidation(): boolean {\n        let result = false;\n        for (const offer of this.offers) {\n            if (offer.limitUnit === '001') {\n                const unitLimitTickets = this.offers.filter((targetOffer) => {\n                    return (targetOffer.limitUnit === '001' && targetOffer.limitCount === offer.limitCount);\n                });\n                if (unitLimitTickets.length % offer.limitCount !== 0) {\n                    offer.validation = true;\n                    result = true;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * 合計金額計算\n     * @method getTotalPrice\n     */\n    public getTotalPrice(): number {\n        let result = 0;\n        const selectedOffers = this.offers.filter((offer) => {\n            return (offer.selected);\n        });\n        for (const offer of selectedOffers) {\n            result += getTicketPrice(offer);\n        }\n\n        return result;\n    }\n\n    /**\n     * 券種選択\n     * @method ticketSelect\n     * @param {Event} event\n     * @param {Ioffer} offer\n     */\n    public ticketSelect(offer: Ioffer) {\n        this.selectOffer = offer;\n        this.ticketsModal = true;\n    }\n\n    /**\n     * 販売可能券種選択\n     * @method selectSalseTicket\n     * @param {ISalesTicket} ticket\n     * @param {boolean} glass\n     */\n    public selectSalseTicket(ticket: ISalesTicketResult) {\n        const target = this.offers.find((offer) => {\n            return (offer.seatNumber === this.selectOffer.seatNumber);\n        });\n        if (target === undefined) {\n            this.ticketsModal = false;\n\n            return;\n        }\n        if (this.purchase.data.screeningEvent !== undefined) {\n            const ltdTicketCode = this.purchase.getMemberTicketCode();\n            if (ltdTicketCode.indexOf(ticket.ticketCode) >= 0) {\n                this.salesTickets = this.salesTickets.filter(\n                    (t) => ltdTicketCode.indexOf(t.ticketCode) < 0\n                );\n                this.ltdSelected = target;\n            } else if (this.ltdSelected === target) {\n                this.ltdSelected = undefined;\n                this.salesTickets = this.originalSaleTickets;\n            }\n        }\n        const findTicket = this.purchase.data.pointTickets.find((pointTicket) => {\n            return (pointTicket.ticketCode === ticket.ticketCode);\n        });\n        const usePoint = (findTicket !== undefined) ? findTicket.usePoint : 0;\n        const spseatAdd1 = (target.ticketInfo.spseatAdd1 === undefined)\n            ? 0 : target.ticketInfo.spseatAdd1;\n        target.price = ticket.salePrice;\n        target.priceCurrency = this.selectOffer.priceCurrency;\n        target.seatNumber = this.selectOffer.seatNumber;\n        target.seatSection = this.selectOffer.seatSection;\n        target.selected = true;\n        target.limitCount = ticket.limitCount;\n        target.limitUnit = ticket.limitUnit;\n        target.ticketInfo = {\n            mvtkNum: '',\n            ticketCode: ticket.ticketCode,\n            ticketName: ticket.ticketName,\n            mvtkAppPrice: 0,\n            addGlasses: ticket.addGlasses,\n            kbnEisyahousiki: '00',\n            mvtkKbnDenshiken: '00',\n            mvtkKbnMaeuriken: '00',\n            mvtkKbnKensyu: '00',\n            mvtkSalesPrice: 0,\n            addPrice: ticket.addPrice,\n            disPrice: 0,\n            salePrice: ticket.salePrice + spseatAdd1,\n            seatNum: this.selectOffer.seatNumber,\n            stdPrice: ticket.stdPrice,\n            ticketCount: 1,\n            ticketNameEng: ticket.ticketNameEng,\n            ticketNameKana: ticket.ticketNameKana,\n            usePoint: usePoint,\n            spseatAdd1: target.ticketInfo.spseatAdd1,\n            spseatAdd2: target.ticketInfo.spseatAdd2,\n            spseatKbn: target.ticketInfo.spseatKbn\n        };\n        this.totalPrice = this.getTotalPrice();\n        this.upDateSalseTickets();\n        this.ticketsModal = false;\n    }\n\n    /**\n     * ムビチケ券種選択\n     * @method selectMvtkTicket\n     * @param {ISalesMvtkTicket} ticket\n     * @param {boolean} glass\n     */\n    public selectMvtkTicket(ticket: ISalesMvtkTicket) {\n        const target = this.offers.find((offer) => {\n            return (offer.seatNumber === this.selectOffer.seatNumber);\n        });\n        if (target === undefined) {\n            this.ticketsModal = false;\n\n            return;\n        }\n        const spseatAdd1 = (target.ticketInfo.spseatAdd1 === undefined)\n            ? 0 : target.ticketInfo.spseatAdd1;\n\n        target.price = ticket.salePrice;\n        target.priceCurrency = this.selectOffer.priceCurrency;\n        target.seatNumber = this.selectOffer.seatNumber;\n        target.seatSection = this.selectOffer.seatSection;\n        target.selected = true;\n        target.limitCount = 1;\n        target.limitUnit = '001';\n        target.ticketInfo = {\n            mvtkNum: ticket.knyknrNoInfo.knyknrNo,\n            ticketCode: ticket.mvtkTicketcodeResult.ticketCode,\n            ticketName: ticket.ticketName,\n            mvtkAppPrice: Number(ticket.ykknInfo.kijUnip),\n            addGlasses: ticket.addGlasses,\n            kbnEisyahousiki: ticket.ykknInfo.eishhshkTyp,\n            mvtkKbnDenshiken: ticket.knyknrNoInfo.dnshKmTyp,\n            mvtkKbnMaeuriken: ticket.knyknrNoInfo.znkkkytsknGkjknTyp,\n            mvtkKbnKensyu: ticket.ykknInfo.ykknshTyp,\n            mvtkSalesPrice: Number(ticket.ykknInfo.knshknhmbiUnip),\n            addPrice: ticket.mvtkTicketcodeResult.addPrice,\n            disPrice: 0,\n            salePrice: ticket.salePrice + spseatAdd1,\n            seatNum: this.selectOffer.seatNumber,\n            stdPrice: 0,\n            ticketCount: 1,\n            ticketNameEng: ticket.mvtkTicketcodeResult.ticketNameEng,\n            ticketNameKana: ticket.mvtkTicketcodeResult.ticketNameKana,\n            spseatAdd1: target.ticketInfo.spseatAdd1,\n            spseatAdd2: target.ticketInfo.spseatAdd2,\n            spseatKbn: target.ticketInfo.spseatKbn\n        };\n        this.totalPrice = this.getTotalPrice();\n        this.upDateSalseTickets();\n        this.ticketsModal = false;\n    }\n\n    /**\n     * 販売券種金額取得\n     */\n    public getSalseTicketPrice(\n        offer: ISalesTicketResult | ISalesMvtkTicket | ISalesPointTicket\n    ) {\n        if (this.selectOffer === undefined) {\n            return offer.salePrice;\n        }\n        const ticketInfo = this.selectOffer.ticketInfo;\n        const spseatAdd1 = (ticketInfo.spseatAdd1 === undefined) ? 0 : ticketInfo.spseatAdd1;\n        const spseatAdd2 = (ticketInfo.spseatAdd2 === undefined) ? 0 : ticketInfo.spseatAdd2;\n        // console.log(offer.salePrice);\n        return (offer.salePrice + spseatAdd1 + spseatAdd2);\n    }\n\n}\n","<app-loading [show]=\"true\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n    AwsCognitoService,\n    ErrorService,\n    FlgMember,\n    PurchaseService,\n    SasakiService,\n    SaveType,\n    StorageService,\n    UserService\n} from '../../../../../services';\n\n@Component({\n    selector: 'app-purchase-transaction',\n    templateUrl: './purchase-transaction.component.html',\n    styleUrls: ['./purchase-transaction.component.scss']\n})\nexport class PurchaseTransactionComponent implements OnInit {\n    public parameters: {\n        /**\n         * パフォーマンスId\n         */\n        performanceId?: string;\n        /**\n         * WAITER許可証トークン\n         */\n        passportToken?: string;\n        /**\n         * awsCognitoIdentityId\n         */\n        identityId?: string;\n        /**\n         * ネイティブアプリ\n         */\n        native?: string;\n        /**\n         * 会員\n         */\n        member?: string;\n        /**\n         * アクセストークン\n         */\n        accessToken?: string;\n        /**\n         * signinリダイレクト\n         */\n        signInRedirect: boolean;\n        /**\n         * クライアントID\n         */\n        clientId?: string;\n    };\n    constructor(\n        private storage: StorageService,\n        private router: Router,\n        private sasaki: SasakiService,\n        private purchase: PurchaseService,\n        private error: ErrorService,\n        private awsCognito: AwsCognitoService,\n        private user: UserService\n    ) { }\n\n    /**\n     * 初期化\n     */\n    public async ngOnInit() {\n        try {\n            this.parameters = this.storage.load('parameters', SaveType.Session);\n            if (!this.parameters.signInRedirect) {\n                this.user.reset();\n                this.user.load();\n                this.user.save();\n            }\n            if (!this.parametersChack()) {\n                throw new Error('parameters is undefined');\n            }\n            this.user.setNative(this.parameters.native);\n            this.user.setClientId(this.parameters.clientId);\n            this.user.save();\n            if (this.parameters.member === FlgMember.Member\n                && !this.parameters.signInRedirect) {\n                await this.sasaki.signIn();\n\n                return;\n            }\n\n            // ticketアプリテスト\n            // this.parameters.identityId = 'ap-northeast-1:c93ad6a4-47e6-4023-a078-2a9ea80c15c9';\n            if (this.parameters.identityId !== undefined) {\n                await this.awsCognito.authenticateWithDeviceId(this.parameters.identityId);\n            }\n            await this.sasaki.getServices();\n            // イベント情報取得\n            const screeningEvent = await this.sasaki.event.findScreeningEventById({\n                id: (<string>this.parameters.performanceId)\n            });\n            // 開始可能日判定\n            if (!(await this.purchase.isSalse(screeningEvent))) {\n                throw new Error('Unable to start sales');\n            }\n            if (this.purchase.data.transaction !== undefined && this.purchase.isExpired()) {\n                // 取引期限切れなら購入情報削除\n                this.purchase.reset();\n            }\n            // if (this.user.isNative()) {\n            //     // アプリなら購入情報削除\n            //     this.purchase.reset();\n            // }\n            if (this.purchase.data.tmpSeatReservationAuthorization !== undefined) {\n                // 重複確認へ\n                this.storage.save('screeningEvent', screeningEvent, SaveType.Session);\n                this.router.navigate([`/purchase/overlap`]);\n\n                return;\n            }\n\n            await this.purchase.transactionStartProcess({\n                passportToken: <string>this.parameters.passportToken,\n                screeningEvent: screeningEvent\n            });\n            this.storage.remove('parameters', SaveType.Session);\n            this.router.navigate(['/purchase/seat'], { replaceUrl: true });\n        } catch (err) {\n            this.error.redirect(err);\n        }\n    }\n\n    /**\n     * @method parametersChack\n     * @requires {boolean}\n     */\n    private parametersChack(): boolean {\n        let result = true;\n        if (this.parameters.passportToken === undefined\n            || this.parameters.performanceId === undefined) {\n            result = false;\n        }\n\n        return result;\n    }\n\n}\n","<li class=\"button white-button {{ availability.className }}\" (click)=\"start()\">\n    <dl>\n        <dt>\n            <div class=\"text-left\">\n                <div class=\"large-text mb-x-small\">\n                    <strong>{{ data.startDate | timeFormat: data.coaInfo?.dateJouei }}</strong>\n                </div>\n                <div>～{{ data.endDate | timeFormat: data.coaInfo?.dateJouei }}</div>\n            </div>\n            <div class=\"text-center small-x-text status\">\n                <div class=\"mb-x-small text\">{{ availability.text }}</div>\n                <div class=\"image\"></div>\n            </div>\n        </dt>\n        <dd class=\"small-text text-center\">\n            <div class=\"screen-name\">{{ data.location.name.ja }}</div>\n        </dd>\n    </dl>\n</li>","import { Component, Input, OnInit } from '@angular/core';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\nimport { environment } from '../../../../../../environments/environment';\nimport { object2query } from '../../../../../functions';\n\ninterface Iavailability {\n    text: string;\n    className: string;\n}\n\n@Component({\n    selector: 'app-purchase-film-order-performance',\n    templateUrl: './purchase-film-order-performance.component.html',\n    styleUrls: ['./purchase-film-order-performance.component.scss']\n})\nexport class PurchaseFilmOrderPerformanceComponent implements OnInit {\n    @Input() public data: factory.chevre.event.screeningEvent.IEvent;\n    @Input() public member: boolean;\n    public availability: Iavailability;\n\n    constructor() { }\n\n    public ngOnInit() {\n        const availability = (this.data.offers === undefined) ? undefined : this.data.offers.availability;\n        this.availability = this.getAvailability(availability);\n    }\n\n    /**\n     * @method getAvailability\n     * @param {number | null} availability\n     * @returns {Iavailability}\n     */\n    public getAvailability(availability?: number | factory.chevre.itemAvailability): Iavailability {\n        const availabilityList = [\n            {\n                text: '満席',\n                className: 'vacancy-full'\n            },\n            {\n                text: '残りわずか',\n                className: 'vacancy-little'\n            },\n            {\n                text: '空席あり',\n                className: 'vacancy-large'\n            }\n        ];\n\n        return (availability === 0 || availability === undefined)\n            ? availabilityList[0] : (availability <= 10)\n                ? availabilityList[1] : availabilityList[2];\n    }\n\n    /**\n     * @method start\n     * @returns {void}\n     */\n    public start(): void {\n        const availability = (this.data.offers === undefined) ? undefined : this.data.offers.availability;\n        if (availability === 0 || availability === undefined) {\n            return;\n        }\n        const query = object2query({\n            id: this.data.identifier,\n            member: (this.member) ? '1' : '0'\n        });\n        location.href = `${environment.ENTRANCE_SERVER_URL}/purchase/index.html?${query}`;\n    }\n\n}\n","<li class=\"performance mb-x-small\">\n    <dl>\n        <dt>\n            <div class=\"mb-x-small\">\n                <strong>{{ title }}</strong>\n            </div>\n            <div class=\"small-text\">{{ duration | duration: 'minutes' }}分</div>\n        </dt>\n        <dd>\n            <ul>\n                <app-purchase-film-order-performance *ngFor=\"let film of data.films\" [data]=\"film\" [member]=\"member\"></app-purchase-film-order-performance>\n            </ul>\n        </dd>\n    </dl>\n</li>","import { Component, Input, OnInit } from '@angular/core';\nimport { factory } from '@motionpicture/sskts-api-javascript-client';\n\ninterface IFilmOrder {\n    id: string;\n    films: factory.chevre.event.screeningEvent.IEvent[];\n}\n\n@Component({\n    selector: 'app-purchase-film-order',\n    templateUrl: './purchase-film-order.component.html',\n    styleUrls: ['./purchase-film-order.component.scss']\n})\nexport class PurchaseFilmOrderComponent implements OnInit {\n    @Input() public data: IFilmOrder;\n    @Input() public member: boolean;\n    public title: string;\n    public duration: string;\n\n    constructor() { }\n\n    public ngOnInit() {\n        const film = this.data.films[0];\n        this.title = film.name.ja;\n        this.duration = (film.workPerformed === undefined\n            || film.workPerformed.duration === undefined\n            || film.workPerformed.duration === null)\n            ? '' : film.workPerformed.duration;\n    }\n\n}\n","<div class=\"box radius bg-ultra-light-gray small-x-text notes \">\n    <ol>\n        <li>\n            1. {{ ordinance }}の定めにより、18歳未満及び高校生の方は終映が{{ limit }}を過ぎる上映回のﾁｹｯﾄをご購入頂けません。また保護者同伴でもご入場頂けません。\n        </li>\n        <li>\n            2. チケット購入はクレジット決済のみとなり、発券の際には予約番号、電話番号が必要となります。\n        </li>\n        <li>\n            3. 決済をしてご購入いただいたチケットは、上映中止・もしくは上映延期とならない限り、交通渋滞・電車遅延などいかなる理由があっても、チケットのキャンセル・変更・払い戻しは一切致しません。\n        </li>\n        <li>\n            4. 上映中止・および上映延期の場合の旅費などは補償いたしません。\n        </li>\n        <li>\n            5. 学生料金・シニア料金の各チケットを購入された方は、ご入場時にチケットと一緒に、以下の証明書をご提示頂きます。\n            <ul class=\"note_child\">\n                <li>・学生の方は、学校長発行の学生証または生徒手帳。</li>\n                <li>・シニアの方は、生年月日が確認できる公的機関発行の証明書。</li>\n                <li>・ハンディキャップの方は、障害者手帳。</li>\n            </ul>\n            ご提示いただけない場合は、一般料金との差額をいただきます。\n        </li>\n        <li>\n            6. その他の利用規約についても同意します。\n        </li>\n        <li class=\"ticket-app-hide\">\n            7. 購入完了ページに表示される予約番号はチケットの発券に必要となりますのでメモをとるなどして、必ずお控えください。\n        </li>\n        <li class=\"ticket-app-show\">\n            7. 購入完了ページに表示される予約番号はメモを取るなどして、必ずお控えください\n        </li>\n    </ol>\n</div>","import { Component, Input, OnInit } from '@angular/core';\n\nconst PURCHASE_NOTE = {\n    '01': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '02': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '06': { ordinance: '静岡県青少年健全育成条例', limit: '23:00' },\n    '07': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '08': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '09': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '10': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '12': { ordinance: '徳島県青少年健全育成条例', limit: '23:00' },\n    '13': { ordinance: '茨城県青少年健全育成条例', limit: '23:00' },\n    '14': { ordinance: '石川県青少年健全育成条例', limit: '23:00' },\n    '15': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '16': { ordinance: '奈良県青少年健全育成条例', limit: '23:00' },\n    '17': { ordinance: '山口県青少年健全育成条例', limit: '23:00' },\n    '18': { ordinance: '鹿児島県青少年保護育成条例', limit: '23:00' },\n    '19': { ordinance: '千葉県青少年健全育成条例', limit: '23:00' },\n    '20': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '21': { ordinance: '静岡県青少年健全育成条例', limit: '23:00' }\n};\n\n@Component({\n    selector: 'app-purchase-note',\n    templateUrl: './purchase-note.component.html',\n    styleUrls: ['./purchase-note.component.scss']\n})\nexport class PurchaseNoteComponent implements OnInit {\n\n    @Input() public theaterCode: string;\n    public ordinance: string;\n    public limit: string;\n    constructor() { }\n\n    public ngOnInit() {\n        this.ordinance = '';\n        this.limit = '';\n        if ((<any>PURCHASE_NOTE)[this.theaterCode] !== undefined) {\n            this.ordinance = (<any>PURCHASE_NOTE)[this.theaterCode].ordinance;\n            this.limit = (<any>PURCHASE_NOTE)[this.theaterCode].limit;\n        }\n    }\n\n}\n","<div class=\"steps not-print\">\n    <ul>\n        <li class=\"step step-01\" [class.active]=\"url === '/purchase/seat'\"><div class=\"text\">座席選択</div></li>\n        <li class=\"step step-02\" [class.active]=\"url === '/purchase/ticket'\"><div class=\"text\">券種選択</div></li>\n        <li class=\"step step-03\" [class.active]=\"url === '/purchase/input'\"><div class=\"text\">情報入力</div></li>\n        <li class=\"step step-04\" [class.active]=\"url === '/purchase/confirm'\"><div class=\"text\">確認</div></li>\n        <li class=\"step step-05\" [class.active]=\"url === '/purchase/complete'\"><div class=\"text\">購入完了</div></li>\n    </ul>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\n\n@Component({\n    selector: 'app-purchase-step',\n    templateUrl: './purchase-step.component.html',\n    styleUrls: ['./purchase-step.component.scss']\n})\nexport class PurchaseStepComponent implements OnInit {\n    public url: string;\n    constructor(\n        private router: Router\n    ) { }\n\n    public ngOnInit() {\n        this.changePage(this.router.url);\n        this.router.events.subscribe((event) => {\n            if (event instanceof NavigationEnd) {\n                this.changePage(event.url);\n            }\n        });\n    }\n\n    /**\n     * ページ変更\n     * @method changePage\n     */\n    private changePage(url: string) {\n        this.url = url;\n    }\n\n}\n","<div class=\"box bg-ultra-light-gray term small-x-text\">\n    <p>\n        【オンライン利用規約】\n        <br>\n        <br>前文\n        <br>　 佐々木興業株式会社(以下、「当社」とします)は、「オンライン先売りチケットサービス」（以下「本サービス」とします)をご利用いただく際に、次の利用規約(以下「本規約」とします)を設けております。本規約をご承諾の上、本サービスをご利用ください。\n        <br>\n        <br>第1条　本サービスの内容と利用条件\n        <br>・ 本サービスは、当社が運営する映画館で上映を行う映画の観賞チケットを当社が運営しているサイト(以下、「当サイト」とします)にて事前予約販売するものです。\n        <br>・ 本サービスをご利用頂くには本規約への同意が必要となります。\n        <br>・ お客様が本規約のすべての条項に同意されない場合は本サービスをご利用頂けません。\n        <br>　 また、お客様が本規約に違反した場合にはご利用をお断りすることがあります。\n        <br>・ お客様自身の責任においてコンピューター・携帯電話の操作およびインターネット利用ができ、本サービスを利用するために必要なインターネット環境の適切な設定、文字(日本語表示)やメール等の諸設定がなされている方を対象にしています。また上記条件を満たしていても、誤操作やネット環境の事情によって本サービスが正常に動作しない場合、それらがもたらす諸影響について当社は一切責任を負いません。\n        <br>・ インターネット利用の一般的なマナー、モラルを遵守して頂きます。当社が不適切と判断する行為を行うお客様には本サービスのご利用をお断りすることがあります。\n        <br>・ 未成年者が本サービスを利用する場合、親権者または後見人の同意の上ご利用ください。未成年者が本サービスを利用された場合は、本サービスの全ての事項について親権者または後見人の同意があったものとみなします。\n        <br>\n        <br>第2条　本サービス・規約の変更／中断／中止について\n        <br>・ 当社は事前の通告無しに本サービス、本規約の変更をすることがあります。本サービスをご利用の際は必ずサービス内容・本規約をご確認ください。内容変更後は変更後の内容のみを有効とさせて頂きます。\n        <br>・ 当社は以下の理由によりお客様に通告無しに本サービスの全部又は一部を中断、中止できるものとします。\n        <br>　 1.本サービスに係るシステムの定期的または突発的な理由による保守・点検を行う場合\n        <br>　 2.天災、事変、その他の非常事態の発生により本サービスの提供が困難になった場合\n        <br>　 3.当社以外の第三者の妨害によって本サービスの提供が困難になった場合\n        <br>　 4.その他、当社が本サービスの運営上必要と判断した場合\n        <br>・ 当社は理由の如何を問わず、本サービスの提供の中断または中止によって生じたお客様の損害につき、一切責任を負わないものとします。\n        <br>\n        <br>第3条　禁止行為\n        <br>　 1.他のお客様、第三者または当社に不利益もしくは損害を与える行為、および与えるおそれのある行為\n        <br>　 2.他のお客様、第三者または当社を誹謗中傷する行為\n        <br>　 3.犯罪的行為、もしくは犯罪的行為に結び付く行為、またはそのおそれのある行為\n        <br>　 4.法令に違反する、または違反するおそれのある行為\n        <br>　 5.公序良俗に反する行為、もしくはそのおそれのある行為、または公序良俗に反する情報を他のお客様または第三者に提供する行為\n        <br>　 6.性風俗、宗教、政治に関する行為\n        <br>　 7.権利者の承諾を得ないで、いかなる方法においても、本サービスを通じて提供される情報・著作物について著作権法で定める個人の私的利用の範囲を超えて使用すること\n        <br>　 8.本サービスを通じて、もしくは本サービスに関連して、営利を目的とする行為、またはその準備を目的とした行為\n        <br>　 9.コンピューターウイルスなどの有害なプログラムを、本サービスを通じて、もしくは本サービスに関連して使用する、提供する行為\n        <br>　 10.当社から購入した電子チケットを、営利を目的として第三者に転売、または転売のために第三者に提供する行為\n        <br>　 11.その他、当社が不適切と判断する行為\n        <br>\n        <br>第4条　チケット販売について\n        <br>・ 本サービスご利用にあたって「氏名」「連絡先」「メールアドレス」「クレジットカード番号」「電話番号」などの個人情報を入力していただきます。個人情報が不正確・虚偽がある場合はお申込みを無効とさせて頂きます。\n        <br>・ 本サービスは、当サイトに掲載されている上映作品、上映時間のうち販売画面で選択可能なもののチケットのみご購入頂けます。一部上映作品、上映時間については取扱いがない場合があります。\n        <br>・ 本サービスはシステムメンテナンスによるサービス提供の中断及び第2条で定める場合をのぞき、24時間営業を行っております。メンテナンスを行う際は事前に当サイトにて告知しますが、第2条で定める通りやむをえない場合は事前の通告無しにサービスを中断します。\n        <br>・ 本サービスは当社規定の料金体系に基づくことを前提とします。尚、対象券種は当社が決定するものとし、お客様への事前の通告なしに変更できるものとします。\n        <br>　 ※各種証明書のご提示が必要な券種は、ご鑑賞当日、入場口にて確認させて頂きます。詳しくは第7条でご確認ください。\n        <br>・ ご予約の受付はご鑑賞日2日前から上映開始1時間前までです。1回の購入申込みで購入出来る枚数に制限が付きます。制限枚数は、その都度変更されます。制限枚数以上購入の場合は複数の購入操作が必要となります。複数の購入申込みを行った場合、座席は購入操作ごとで離れたお席になります。\n        <br>・ 映画倫理規定管理委員会の定めたレイティング(鑑賞年齢制限)の定められた作品では該当のお客様のご利用をお断りすることがあります。制限年齢に達しないお客様が誤って購入したチケットの返金・交換は一切受付けておりません。\n        <br>・ {{ ordinance }}の定めにより、18歳未満及び高校生の方は終映が{{ limit }}を過ぎる上映回のチケットをご購入頂けません。また保護者同伴でもご入場頂けません。\n        <br>・ 本サービスにおける売買契約の成立は、入力頂いた内容に基づきクレジット決済与信手続が終了した時点とします。発券の際には本サービス発行の「予約番号」、お客様入力の「電話番号」が必要となります。\n        <br>・ 購入完了画面表示後はお客様の都合による上映作品の日時の変更、購入の取消、チケットの払い戻しはできないものとします。また、交通渋滞による遅延などその他いかなる場合でも、上映作品の日時変更、購入の取消、チケットの払い戻しは受付けません。なお、チケットはクーリングオフの対象外となっております。\n        <br>・ 当社からご購入の予約番号の記載された確認のメールを送信します。当サイトの指定項目の記入漏れ、メールアドレスの誤入力、文字化けなどにより確認のメールが送信できない場合、確認メールの不達、遅達について当社は一切の責任を負わないものとします。\n        <br>・ 上映劇場はやむをえず変更になる場合があります。上映劇場の変更やその他の理由により予約座席が変更となる場合があります。\n        <br>・ 上映時間に著しく遅れられてのご入場は他のお客様のご迷惑になりますのでご入場をお断りすることがあります。\n        <br>・ 不可抗力による上映中止の場合は、所定の期間内に限り所定の方法にて払い戻しを行います。払い戻しの対象はチケット代金のみとなります。お客様都合による払い戻しはできません。\n        <br>\n        <br>第5条　決済方法\n        <br>・ 本サービスの支払い方法はクレジットカード決済になります。国内発行かつ当社指定のクレジットカード(VISA,Master Card,JCB,American express,Diners Club)をお持ちのお客様のみご利用頂けます。\n        <br>・ チケット購入手続きの際の虚偽入力、誤入力もしくは入力漏れ、またはクレジットカード会社の規約違反等によりクレジットカード決済ができない場合は、チケットの購入は無効とさせて頂きます。クレジットカードのお取扱いができない場合には、クレジット会社に直接お問い合わせください。\n        <br>・ クレジットカード利用によるトラブルについて当社は一切の責任を負いません。\n        <br>・ その他、本サービスにおけるクレジットカード決済に関する事項は、クレジット会社における利用規約に準じます。\n        <br>\n        <br>第6条　発券方法\n        <br>・ チケットの発券方法は以下2通りからお選び頂けます。\n        <br>　 上映当日に劇場備え付けの「自動発券機」に「予約番号」とお客様が設定された「電話番号」を入力するとチケットを発券頂けます。\n        <br>　 またはチケット情報確認画面へアクセス頂き、「チケットを購入した劇場」「予約番号」「電話番号」を入力してログインし、 ご鑑賞時間の24時間前から入場用QRコードチケットを取得して頂けます。\n        <br>　 いずれかのチケットをご持参頂きご入場ください。\n        <br>　 予約番号、電話番号を失念された場合は劇場スタッフにお申し付けください。入力された個人情報が確認できない場合、発券できないことがあります。\n        <br>・ チケットは如何なる場合(紛失・盗難・破損など)でも再発行致しません。\n        <br>\n        <br>第7条　身分証明書の提示\n        <br>・ 本サービスで購入された「学生」、「シニア」、「ハンディキャップ」のチケットについて当該チケットの引渡しを受けたお客様は、ご入場時、身分証明書の提示が必要です。提示がない場合は一般料金との差額を頂きます。\n        <br>・ 各種割引チケットで必要な証明書は以下の通りです。\n        <br>　 「学生」：学校長発行の学生証または生徒手帳\n        <br>　 ※「学生」・・・大学生、専門学校生、高等専門学校生、高等学校生を指します。\n        <br>　 「シニア」：生年月日又は年齢について記載のある公的機関発行の身分証明書(運転免許証など)\n        <br>　 「ハンディキャップ」：障害者手帳\n        <br>\n        <br>第8条　個人情報の取扱い\n        <br>・ 当社は、別途掲載する「プライバシーポリシー」と本条項に基づきお客様の個人情報を取扱うものとし、お客様は「プライバシーポリシー」と本条項を確認し同意の上、本サービスをご利用頂くものとします。\n        <br>・ 本サービスにて入力頂く個人情報は、お客様に本サービスを円滑に提供するため収集するものです。\n        <br>・ 本サービスは、個人情報の入力及びクレジット決済時にあたり、情報を第三者に傍受されないよう暗号化する方式(SSL)を採用して個人情報の保護に努めておりますが、その方式にも限界があり100％安全性を保証できるわけではありません。データへの不正アクセスほか、いかなる方法でトラブルが生じた場合でも一切責任を負わないものとします。\n        <br> ※SSLとはSecure Socket Layerの略で、インターネット上でやり取りされているデータ(個人名、住所、電話番号などの個人情報や企業の機密情報など)を暗号・複合化し、第三者からデータを覗かれないようにする通信技術のことです。SSLでは、暗号化は送信側で通信データをパケットに分割する前に行われ、複合化は受信パケットを組み合わせた後に行われます。このため通信中のデータはすべて解読困難な形になっています。ただし、暗号化された情報を複合することは、例えそれが解読に膨大な時間がかかるような極めて難しい計算を要したとしても理論上は可能であり、データへの不正アクセスが100%起こらないとは言い切れません。\n        <br>\n        <br>第9条　著作権\n        <br>・ お客様は権利者の同意を得ずして本サービスを通して提供される情報などについて著作権法で定める私的利用の範囲を超えて使用することは出来ません。\n        <br>・ 前項の規定に関わらず、権利者とお客様の間で問題が生じた場合は、お客様は自己の責任と費用において問題解決に当たっていただきます。\n        <br>\n        <br>第10条　業務の委託\n        <br>・ 当社は本サービスの提供に必要な業務の全部又は一部を、当社が適切と判断するところに従い、第三者に委託して行わせることができるものとします。\n        <br>\n        <br>第11条　免責\n        <br>・ 当社は本サービス内容の正確性確保に鋭意努めますが、本サービス内容およびお客様が本サービスを通じて得る情報等の完全性、正確性、確実性、有用性等については如何なる保証も行いません。\n        <br>・ 当サイトの利用・閲覧はお客様の責任で行うものとします。当サイトへのアクセス、画像などのデータをダウンロードすることにより、お客様のコンピューター機器等が損害を被った場合、又はウイルスに感染された場合であっても当社は一切の責任を負いません。\n        <br>・ 上映中止によりチケット料金の払い戻しを行う場合は、原則として払い戻し金額はチケット券面額とします。券面金額以外の費用(クレジットカードの手数料、旅費交通費、通信費等)を当社は一切負担いたしません。\n        <br>・ 当社は本サービスからリンクされている各サイトに含まれている情報、サービス等については一切関知しておらず、一切の責任を負わないものとします。\n        <br>\n        <br>第12条　準拠法及び管轄裁判所\n        <br>・ 本規約の解釈、適用に関わる準拠法は日本法とします。\n        <br>・ 本サービスに関連して、お客様が故意または過失に関わらず、他のお客様、当社、第三者に損害を与えた場合、お客様は自己の費用と責任で損害を賠償するものとします。\n        <br>・ 本サービスに関連してお客様と当社との間で紛争が生じた場合には、双方誠意を持って協議するものとします。\n        <br>・ 前項の協議によっても紛争を解決できない場合は、東京地方裁判所または東京簡易裁判所を専属的合意管轄裁判所とします。\n        <br>\n        <br>第13条　その他\n        <br>・ お客様は、本規約に定めのない事項について、別途当社の定めるところに従うものとします。\n    </p>\n</div>","import { Component, Input, OnInit } from '@angular/core';\n\nconst PURCHASE_TERM = {\n    '01': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '02': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '06': { ordinance: '静岡県青少年健全育成条例', limit: '23:00' },\n    '07': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '08': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '09': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '10': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '12': { ordinance: '徳島県青少年健全育成条例', limit: '23:00' },\n    '13': { ordinance: '茨城県青少年健全育成条例', limit: '23:00' },\n    '14': { ordinance: '石川県青少年健全育成条例', limit: '23:00' },\n    '15': { ordinance: '愛媛県青少年健全育成条例', limit: '23:00' },\n    '16': { ordinance: '奈良県青少年健全育成条例', limit: '23:00' },\n    '17': { ordinance: '山口県青少年健全育成条例', limit: '23:00' },\n    '18': { ordinance: '鹿児島県青少年保護育成条例', limit: '23:00' },\n    '19': { ordinance: '千葉県青少年健全育成条例', limit: '23:00' },\n    '20': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\n    '21': { ordinance: '静岡県青少年健全育成条例', limit: '23:00' }\n};\n\n@Component({\n    selector: 'app-purchase-term',\n    templateUrl: './purchase-term.component.html',\n    styleUrls: ['./purchase-term.component.scss']\n})\nexport class PurchaseTermComponent implements OnInit {\n    @Input() public theaterCode: string;\n    public ordinance: string;\n    public limit: string;\n    constructor() { }\n\n    public ngOnInit() {\n        this.ordinance = '';\n        this.limit = '';\n        if ((<any>PURCHASE_TERM)[this.theaterCode] !== undefined) {\n            this.ordinance = (<any>PURCHASE_TERM)[this.theaterCode].ordinance;\n            this.limit = (<any>PURCHASE_TERM)[this.theaterCode].limit;\n        }\n    }\n\n}\n","<div class=\"seat-info\" [class.screen-4dx]=\"type === '002' || type === '004'\">\n    <div class=\"box radius bg-white\">\n        <div class=\"seat\">\n            <strong>空席</strong>\n        </div>\n        <div class=\"seat active\">\n            <strong>選択済</strong>\n        </div>\n        <div class=\"seat disabled\">\n            <strong>選択不可</strong>\n        </div>\n    </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-seat-info',\n  templateUrl: './seat-info.component.html',\n  styleUrls: ['./seat-info.component.scss']\n})\nexport class SeatInfoComponent implements OnInit {\n  @Input() public type: string;\n  constructor() { }\n\n  public ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MemberGuardService, PurchaseGuardService } from '../../guards';\nimport { BaseComponent } from '../shared/components/pages/base/base.component';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchaseInputComponent } from './components/pages/purchase-input/purchase-input.component';\nimport { PurchaseMvtkConfirmComponent } from './components/pages/purchase-mvtk-confirm/purchase-mvtk-confirm.component';\nimport { PurchaseMvtkInputComponent } from './components/pages/purchase-mvtk-input/purchase-mvtk-input.component';\nimport { PurchaseOverlapComponent } from './components/pages/purchase-overlap/purchase-overlap.component';\nimport { PurchasePointComponent } from './components/pages/purchase-point/purchase-point.component';\nimport { PurchaseScheduleComponent } from './components/pages/purchase-schedule/purchase-schedule.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { PurchaseTransactionComponent } from './components/pages/purchase-transaction/purchase-transaction.component';\n\n\nconst routes: Routes = [\n  { path: 'transaction', component: PurchaseTransactionComponent },\n  {\n    path: '',\n    component: BaseComponent,\n    children: [\n      { path: 'schedule', component: PurchaseScheduleComponent },\n      { path: 'overlap', component: PurchaseOverlapComponent }\n    ]\n  },\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    canActivate: [PurchaseGuardService],\n    children: [\n      { path: 'seat', component: PurchaseSeatComponent },\n      { path: 'ticket', component: PurchaseTicketComponent },\n      { path: 'input', component: PurchaseInputComponent },\n      { path: 'confirm', component: PurchaseConfirmComponent },\n      { path: 'mvtk/input', component: PurchaseMvtkInputComponent },\n      { path: 'mvtk/confirm', component: PurchaseMvtkConfirmComponent },\n      { path: 'point', canActivate: [MemberGuardService], component: PurchasePointComponent }\n    ]\n  },\n  {\n    path: '',\n    component: PurchaseBaseComponent,\n    children: [\n      { path: 'complete', component: PurchaseCompleteComponent }\n    ]\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PurchaseRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PurchaseBaseComponent } from './components/pages/purchase-base/purchase-base.component';\nimport { PurchaseCompleteComponent } from './components/pages/purchase-complete/purchase-complete.component';\nimport { PurchaseConfirmComponent } from './components/pages/purchase-confirm/purchase-confirm.component';\nimport { PurchaseInputComponent } from './components/pages/purchase-input/purchase-input.component';\nimport { PurchaseMvtkConfirmComponent } from './components/pages/purchase-mvtk-confirm/purchase-mvtk-confirm.component';\nimport { PurchaseMvtkInputComponent } from './components/pages/purchase-mvtk-input/purchase-mvtk-input.component';\nimport { PurchaseOverlapComponent } from './components/pages/purchase-overlap/purchase-overlap.component';\nimport { PurchasePointComponent } from './components/pages/purchase-point/purchase-point.component';\nimport { PurchaseScheduleComponent } from './components/pages/purchase-schedule/purchase-schedule.component';\nimport { PurchaseSeatComponent } from './components/pages/purchase-seat/purchase-seat.component';\nimport { PurchaseTicketComponent } from './components/pages/purchase-ticket/purchase-ticket.component';\nimport { PurchaseTransactionComponent } from './components/pages/purchase-transaction/purchase-transaction.component';\nimport { PurchaseFilmOrderPerformanceComponent } from './components/parts/purchase-film-order-performance/purchase-film-order-performance.component';\nimport { PurchaseFilmOrderComponent } from './components/parts/purchase-film-order/purchase-film-order.component';\nimport { PurchaseNoteComponent } from './components/parts/purchase-note/purchase-note.component';\nimport { PurchaseStepComponent } from './components/parts/purchase-step/purchase-step.component';\nimport { PurchaseTermComponent } from './components/parts/purchase-term/purchase-term.component';\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\nimport { PurchaseRoutingModule } from './purchase-routing.module';\n\n\n@NgModule({\n  declarations: [\n    PurchaseBaseComponent,\n    PurchaseCompleteComponent,\n    PurchaseConfirmComponent,\n    PurchaseInputComponent,\n    PurchaseMvtkConfirmComponent,\n    PurchaseMvtkInputComponent,\n    PurchaseOverlapComponent,\n    PurchasePointComponent,\n    PurchaseScheduleComponent,\n    PurchaseSeatComponent,\n    PurchaseTicketComponent,\n    PurchaseTransactionComponent,\n    PurchaseFilmOrderComponent,\n    PurchaseFilmOrderPerformanceComponent,\n    PurchaseNoteComponent,\n    PurchaseStepComponent,\n    PurchaseTermComponent,\n    SeatInfoComponent\n  ],\n  entryComponents: [],\n  imports: [\n    CommonModule,\n    PurchaseRoutingModule,\n    SharedModule,\n  ],\n  exports: []\n})\nexport class PurchaseModule { }\n","<div class=\"button-area\">\n    <app-next-button [disabled]=\"disabled\">{{ nextLabel }}</app-next-button>\n    <div class=\"prev-link\">\n        <a routerLink=\"{{ prevLink }}\"><app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>{{ prevLabel }}</a>\n    </div>\n</div>","<div class=\"button next-button blue-button\">\n    <button [disabled]=\"disabled\" type=\"submit\">\n        <app-icon iconName=\"next-white\" width=\"15\" height=\"15\"></app-icon><ng-content></ng-content>\n    </button>\n</div>"],"sourceRoot":"webpack:///"}